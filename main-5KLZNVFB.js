import{a as xt}from"./chunk-4AU3OVQJ.js";import{a as _t}from"./chunk-35FAODZE.js";import{a as nt}from"./chunk-IVYFHR5P.js";import{a as W}from"./chunk-7CNCDI4I.js";import{a as et,c as ht,d as ft,e as de,f as pe,g as Ct,h as ge,n as ue,o as K}from"./chunk-47AB5WO2.js";import{a as ie,b as dt,c as ae,d as H,e as R,f as re,g as se,h as ce,i as pt,j as B,k as gt,l as ut,m as le,n as mt,o as Y}from"./chunk-C33EGRO4.js";import{$a as D,$b as oe,Bb as rt,Cb as qt,Db as Qt,Eb as Zt,Ga as x,H as Wt,I as At,Jb as tt,La as M,M as Z,Q as X,Qa as q,R as L,W as u,X as m,Xa as C,Xb as lt,Y as w,Ya as _,Yb as te,Z as U,Za as jt,Zb as ee,_a as F,_b as ne,a as z,ab as O,ac as k,b as G,bb as r,ca as at,cb as l,db as b,eb as d,f as Bt,fb as p,g as Nt,ga as $,gb as A,h as Ht,hb as P,ib as V,jb as h,kb as S,lb as g,nb as Kt,ob as Yt,pb as Jt,q as Rt,qb as Xt,rb as E,tb as a,ub as v,vb as T,wa as I,wb as ct,x as Gt,xb as zt,ya as s,yb as Lt,zb as Vt}from"./chunk-2J5XD6IE.js";var ve=(i,t)=>t.id;function be(i,t){if(i&1){let e=P();d(0,"div",8),S("click",function(){let o=u(e).$implicit,c=g();return m(c.navigateToCategory(o))}),d(1,"div",9)(2,"img",10),S("error",function(){let o=u(e).$implicit;return m(o.image="/assets/default-category.jpg")}),p()(),d(3,"div",11)(4,"h3",12),a(5),p()()()}if(i&2){let e=t.$implicit;E("clickable",!0),s(2),V("src",e.image,I)("alt",e.title),s(3),v(e.title)}}var vt=class i{constructor(t,e,n,o){this.catalogService=t;this.router=e;this.titleService=n;this.metaService=o;this.categories$=this.catalogService.categories$.pipe(At(c=>{console.log("\u{1F3AF} \u041F\u043E\u043B\u0443\u0447\u0435\u043D\u044B \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 \u0438\u0437 \u0441\u0435\u0440\u0432\u0438\u0441\u0430:",c)}),Rt(c=>c.filter(f=>f.isActive).sort((f,y)=>f.order-y.order).map(f=>{let y=this.cleanCategoryImage(f.image,f.id);return console.log(`\u{1F4F8} \u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F "${f.title}" (ID: ${f.id}):`,{originalImage:f.image?.substring(0,50)+"...",cleanedImage:y}),G(z({},f),{image:y})})),At(c=>{console.log("\u2728 \u041E\u0447\u0438\u0449\u0435\u043D\u043D\u044B\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 \u0434\u043B\u044F \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F:",c)}))}categories$;cleanCategoryImage(t,e){if(console.log(`\u{1F504} \u041E\u0447\u0438\u0441\u0442\u043A\u0430 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 ${e}:`,t?`"${t}" (${t.length} chars)`:"null"),!t||t.length<10){console.log(`   \u26A0\uFE0F \u0418\u0441\u043F\u043E\u0440\u0447\u0435\u043D\u043D\u043E\u0435/\u043A\u043E\u0440\u043E\u0442\u043A\u043E\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 (${t?.length||0} chars)`);let o={1:"/assets/livingroom.jpg",2:"/assets/bedroom.jpg",3:"/assets/kitchen.jpg",4:"/assets/other.jpg",5:"/assets/bedroom2.JPG",6:"/assets/default-category.jpg",7:"/assets/default-category.jpg"}[e]||"/assets/default-category.jpg";return console.log(`   \u21AA\uFE0F \u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u043C: ${o}`),o}return t.includes("supabase.co")||t.includes("storage/v1/object/public")?(console.log("   \u2705 Supabase URL"),t):t.startsWith("data:image")&&t.length>100?(console.log("   \u26A0\uFE0F Base64 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435"),{1:"/assets/livingroom.jpg",2:"/assets/bedroom.jpg",3:"/assets/kitchen.jpg",4:"/assets/other.jpg",5:"/assets/bedroom2.JPG"}[e]||"/assets/default-category.jpg"):t.startsWith("/assets/")?t:t.startsWith("assets/")?"/"+t:"/assets/default-category.jpg"}ngOnInit(){this.titleService.setTitle("\u0422\u043E\u0440\u0433\u043E\u0432\u044B\u0439 \u0434\u043E\u043C KOMFORT - \u0413\u043B\u0430\u0432\u043D\u0430\u044F | \u041C\u0435\u0431\u0435\u043B\u044C \u0434\u043B\u044F \u0434\u043E\u043C\u0430"),this.metaService.updateTag({name:"description",content:"\u0422\u043E\u0440\u0433\u043E\u0432\u044B\u0439 \u0434\u043E\u043C KOMFORT - \u043B\u0443\u0447\u0448\u0430\u044F \u043C\u0435\u0431\u0435\u043B\u044C \u0434\u043B\u044F \u0432\u0430\u0448\u0435\u0433\u043E \u0434\u043E\u043C\u0430. \u0414\u0438\u0432\u0430\u043D\u044B, \u043A\u0440\u043E\u0432\u0430\u0442\u0438, \u043C\u0430\u0442\u0440\u0430\u0441\u044B, \u043A\u0443\u0445\u043D\u0438. \u0413\u0430\u0440\u0430\u043D\u0442\u0438\u044F \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0430."}),this.metaService.updateTag({name:"keywords",content:"KOMFORT, \u043C\u0435\u0431\u0435\u043B\u044C, \u0434\u0438\u0432\u0430\u043D\u044B, \u043A\u0440\u043E\u0432\u0430\u0442\u0438, \u043C\u0430\u0442\u0440\u0430\u0441\u044B, \u043A\u0443\u0445\u043D\u0438, \u0433\u043E\u0441\u0442\u0438\u043D\u044B\u0435, \u0441\u043F\u0430\u043B\u044C\u043D\u0438"})}onImageError(t,e){console.error(`\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 "${e.title}":`,t.target.src),t.target.src="/assets/default-category.jpg";let n=JSON.parse(localStorage.getItem("image_errors")||"[]");n.push({categoryId:e.id,categoryTitle:e.title,imageUrl:t.target.src,timestamp:new Date().toISOString()}),localStorage.setItem("image_errors",JSON.stringify(n))}navigateToCategory(t){console.log("\u{1F535} CatalogComponent: \u041A\u043B\u0438\u043A \u043F\u043E \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438",{title:t.title,slug:t.slug,id:t.id,image:t.image}),this.router.navigate(["/catalog",t.slug])}static \u0275fac=function(e){return new(e||i)(x(W),x(B),x(R),x(H))};static \u0275cmp=M({type:i,selectors:[["app-catalog"]],decls:12,vars:2,consts:[[1,"catalog"],[1,"container"],[1,"catalog-header"],[1,"catalog-title"],[1,"catalog-subtitle"],[1,"catalog-divider"],[1,"catalog-categories"],[1,"category-card",3,"clickable"],[1,"category-card",3,"click"],[1,"category-image"],[3,"error","src","alt"],[1,"category-title-overlay"],[1,"category-title"]],template:function(e,n){e&1&&(d(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),a(4,"\u041A\u0430\u0442\u0430\u043B\u043E\u0433"),p(),d(5,"p",4),a(6,"\u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043D\u0443\u0436\u043D\u044B\u0439 \u0440\u0430\u0437\u0434\u0435\u043B"),p(),A(7,"div",5),p(),d(8,"div",6),F(9,be,6,5,"div",7,ve),rt(11,"async"),p()()()),e&2&&(s(9),D(qt(11,0,n.categories$)))},dependencies:[ee],styles:['@charset "UTF-8";.catalog[_ngcontent-%COMP%]{padding:80px 0;background-color:#f9f9f9;font-family:Geometria,Montserrat,sans-serif}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px}.catalog-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:60px}.catalog-title[_ngcontent-%COMP%]{font-size:42px;font-weight:800;color:#000;margin-bottom:15px;letter-spacing:1px;text-transform:uppercase}.catalog-subtitle[_ngcontent-%COMP%]{font-size:20px;color:#666;margin-bottom:25px;font-weight:400}.catalog-divider[_ngcontent-%COMP%]{width:100px;height:3px;background-color:#ff6b6b;margin:0 auto}.catalog-categories[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:30px}.category-card[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:12px;overflow:hidden;cursor:pointer;box-shadow:0 5px 20px #0000000d;transition:all .3s ease;height:300px}.category-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 30px #0000001a}.category-card[_ngcontent-%COMP%]:hover   .category-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}.category-card[_ngcontent-%COMP%]:hover   .category-title-overlay[_ngcontent-%COMP%]{background:#000c}.category-card[_ngcontent-%COMP%]:hover   .category-title-overlay[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]{color:#fff;transform:translateY(0)}.category-image[_ngcontent-%COMP%]{width:100%;height:100%}.category-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .5s ease}.category-title-overlay[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;padding:20px;background:#0009;transition:all .3s ease}.category-title-overlay[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#fff;text-transform:uppercase;letter-spacing:1px;text-align:center;margin:0;transform:translateY(5px);transition:transform .3s ease}@media(max-width:992px){.catalog[_ngcontent-%COMP%]{padding:60px 0}.catalog-title[_ngcontent-%COMP%]{font-size:36px}.catalog-categories[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.category-card[_ngcontent-%COMP%]{height:250px}.category-title-overlay[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]{font-size:22px}}@media(max-width:768px){.catalog[_ngcontent-%COMP%]{padding:40px 0}.catalog-title[_ngcontent-%COMP%]{font-size:28px}.catalog-subtitle[_ngcontent-%COMP%]{font-size:18px}.catalog-categories[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px}.category-card[_ngcontent-%COMP%]{height:200px}.category-title-overlay[_ngcontent-%COMP%]{padding:15px}.category-title-overlay[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]{font-size:18px}}']})};var me=(i,t)=>t.image;function Me(i,t){if(i&1&&(d(0,"h2"),a(1),p()),i&2){let e=g(2).$implicit;s(),v(e.title)}}function Pe(i,t){if(i&1&&(d(0,"p"),a(1),p()),i&2){let e=g(2).$implicit;s(),v(e.description)}}function Se(i,t){if(i&1&&(d(0,"div",9),C(1,Me,2,1,"h2"),C(2,Pe,2,1,"p"),p()),i&2){let e=g().$implicit;s(),_(e.title?1:-1),s(),_(e.description?2:-1)}}function Oe(i,t){if(i&1&&(d(0,"div",7),A(1,"img",8),C(2,Se,3,2,"div",9),p()),i&2){let e=t.$implicit,n=t.$index,o=g();E("active",o.currentSlide()===n),s(),V("src",e.image,I)("alt",e.title||"Slide"),s(),_(e.title||e.description?2:-1)}}function we(i,t){if(i&1){let e=P();d(0,"button",10),S("click",function(){let o=u(e).$index,c=g();return m(c.goToSlide(o))}),p()}if(i&2){let e=t.$index,n=g();E("active",n.currentSlide()===e)}}var Pt=class i{homeService=L(nt);cdRef=L(tt);slides=$([],{});currentSlide=$(0,{});autoPlayInterval;AUTO_PLAY_DELAY=5e3;ngOnInit(){this.loadSlides(),this.startAutoPlay()}ngOnDestroy(){this.stopAutoPlay()}loadSlides(){let t=this.homeService.getSlides(),e=t.length>0?t:this.getDefaultSlides();setTimeout(()=>{this.slides.set(e),this.cdRef.detectChanges()},0)}getDefaultSlides(){return[{image:"assets/slide1.jpeg",title:"\u0412\u0441\u0435 \u0434\u043B\u044F \u0432\u0430\u0448\u0435\u0433\u043E \u0434\u043E\u043C\u0430",description:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043F\u0435\u0440\u0432\u043E\u0433\u043E \u0441\u043B\u0430\u0439\u0434\u0430"},{image:"assets/slide2.jpg",title:"\u0412\u0441\u0435 \u0434\u043B\u044F \u0432\u0430\u0448\u0435\u0433\u043E \u0434\u043E\u043C\u0430",description:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0432\u0442\u043E\u0440\u043E\u0433\u043E \u0441\u043B\u0430\u0439\u0434\u0430"},{image:"assets/slide3.jpeg",title:"\u0412\u0441\u0435 \u0434\u043B\u044F \u0432\u0430\u0448\u0435\u0433\u043E \u0434\u043E\u043C\u0430",description:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E \u0441\u043B\u0430\u0439\u0434\u0430"},{image:"assets/slide4.jpg",title:"\u0412\u0441\u0435 \u0434\u043B\u044F \u0432\u0430\u0448\u0435\u0433\u043E \u0434\u043E\u043C\u0430",description:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E \u0441\u043B\u0430\u0439\u0434\u0430"}]}nextSlide(){if(this.slides().length===0)return;let t=(this.currentSlide()+1)%this.slides().length;setTimeout(()=>{this.currentSlide.set(t),this.cdRef.detectChanges()},0),this.restartAutoPlay()}prevSlide(){if(this.slides().length===0)return;let t=this.currentSlide()===0?this.slides().length-1:this.currentSlide()-1;setTimeout(()=>{this.currentSlide.set(t),this.cdRef.detectChanges()},0),this.restartAutoPlay()}goToSlide(t){t>=0&&t<this.slides().length&&(setTimeout(()=>{this.currentSlide.set(t),this.cdRef.detectChanges()},0),this.restartAutoPlay())}startAutoPlay(){this.slides().length<=1||(this.stopAutoPlay(),this.autoPlayInterval=setInterval(()=>{this.nextSlide()},this.AUTO_PLAY_DELAY))}stopAutoPlay(){this.autoPlayInterval&&(clearInterval(this.autoPlayInterval),this.autoPlayInterval=null)}restartAutoPlay(){this.stopAutoPlay(),this.startAutoPlay()}getSafeImageUrl(t){return t?t.startsWith("assets/")||t.startsWith("/assets/")?t.startsWith("/")?t:"/"+t:t.startsWith("data:image")?t:t.endsWith(".jpg")||t.endsWith(".jpeg")||t.endsWith(".png")?`/assets/${t.split("/").pop()}`:"assets/default-slide.jpg":"assets/default-slide.jpg"}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-slider"]],decls:13,vars:0,consts:[[1,"slider-container"],[1,"slider-wrapper"],[1,"slide",3,"active"],[1,"slider-btn","prev",3,"click"],[1,"slider-btn","next",3,"click"],[1,"slider-indicators"],[1,"indicator",3,"active"],[1,"slide"],[1,"slide-image",3,"src","alt"],[1,"slide-content"],[1,"indicator",3,"click"]],template:function(e,n){e&1&&(d(0,"div",0)(1,"div",1),F(2,Oe,3,5,"div",2,me),p(),d(4,"button",3),S("click",function(){return n.prevSlide()}),d(5,"span"),a(6,"\u2039"),p()(),d(7,"button",4),S("click",function(){return n.nextSlide()}),d(8,"span"),a(9,"\u203A"),p()(),d(10,"div",5),F(11,we,1,2,"button",6,me),p()()),e&2&&(s(2),D(n.slides()),s(9),D(n.slides()))},styles:['@charset "UTF-8";.slider-container[_ngcontent-%COMP%]{position:relative;width:100%;height:950px;overflow:hidden}.slider-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.slide[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;transition:opacity .5s ease-in-out}.slide.active[_ngcontent-%COMP%]{opacity:1;z-index:1}.slide-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;object-position:center}.slide-content[_ngcontent-%COMP%]{position:absolute;bottom:400px;right:auto;left:200px;color:#fff;text-shadow:2px 2px 4px rgba(0,0,0,.5);max-width:600px;background-color:#0000004d;padding:15px;border-radius:5px}.slide-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:3.5rem;margin-bottom:1rem}.slide-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:2.2rem;line-height:1.5}.slider-btn[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background-color:#0009;border:none;color:#fff;font-size:24px;width:60px;height:60px;border-radius:50%;cursor:pointer;z-index:10;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.slider-btn[_ngcontent-%COMP%]:hover{background-color:#000000e6;transform:translateY(-50%) scale(1.1)}.slider-btn.prev[_ngcontent-%COMP%]{left:30px}.slider-btn.prev[_ngcontent-%COMP%]:before{content:"\\2039";font-size:30px;font-weight:700;margin-right:3px}.slider-btn.next[_ngcontent-%COMP%]{right:30px}.slider-btn.next[_ngcontent-%COMP%]:before{content:"\\203a";font-size:30px;font-weight:700;margin-left:3px}.slider-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.slider-indicators[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:0;right:0;display:flex;justify-content:center;gap:10px;z-index:10}.indicator[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;border:2px solid white;background-color:transparent;cursor:pointer;padding:0;transition:background-color .3s}.indicator.active[_ngcontent-%COMP%]{background-color:#fff}.indicator[_ngcontent-%COMP%]:hover{background-color:#ffffff80}@media(max-width:1200px){.slider-container[_ngcontent-%COMP%]{height:700px}}@media(max-width:992px){.slider-container[_ngcontent-%COMP%]{height:600px}}@media(max-width:768px){.slider-container[_ngcontent-%COMP%]{height:500px}.slide-content[_ngcontent-%COMP%]{bottom:90px;left:20px;right:20px}.slide-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.slide-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.slider-btn[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1.5rem}}@media(max-width:480px){.slider-container[_ngcontent-%COMP%]{height:400px}.slide-content[_ngcontent-%COMP%]{bottom:60px;left:10px;right:10px;padding:10px}.slide-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem}.slide-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}}']})};var Ee=(i,t)=>t.url;function ke(i,t){i&1&&(w(),d(0,"svg",13),A(1,"rect",16)(2,"path",17)(3,"line",18),p())}function Ie(i,t){i&1&&(w(),d(0,"svg",14),A(1,"path",19)(2,"path",20),p())}function Te(i,t){i&1&&(w(),d(0,"svg",15),A(1,"path",21),p())}function Fe(i,t){if(i&1&&(d(0,"span"),a(1),p()),i&2){let e=g().$implicit;s(),v(e.icon)}}function De(i,t){if(i&1&&(d(0,"a",12),C(1,ke,4,0,":svg:svg",13)(2,Ie,3,0,":svg:svg",14)(3,Te,2,0,":svg:svg",15)(4,Fe,2,1,"span"),p()),i&2){let e=t.$implicit;V("href",e.url,I),s(),_(e.name.toLowerCase().includes("insta")?1:e.name.toLowerCase().includes("telegram")||e.name.toLowerCase().includes("tg")?2:e.name.toLowerCase().includes("whatsapp")||e.name.toLowerCase().includes("wa")?3:4)}}var ot=class i{constructor(t,e,n,o){this.contactService=t;this.http=e;this.titleService=n;this.metaService=o}contacts={id:0,phone:"",email:"",office:"",social:[]};contactForm={name:"",phone:"",agree:!1};isSubmitted=!1;errorMessage="";isLoading=!1;lastSubmitTime=0;MIN_SUBMIT_INTERVAL=3e4;ngOnInit(){this.loadContacts()}loadContacts(){let t=this.contactService.getContacts();t&&(this.contacts=z({},t)),this.titleService.setTitle("\u0422\u043E\u0440\u0433\u043E\u0432\u044B\u0439 \u0434\u043E\u043C KOMFORT - \u0413\u043B\u0430\u0432\u043D\u0430\u044F | \u041C\u0435\u0431\u0435\u043B\u044C \u0434\u043B\u044F \u0434\u043E\u043C\u0430"),this.metaService.updateTag({name:"description",content:"\u0422\u043E\u0440\u0433\u043E\u0432\u044B\u0439 \u0434\u043E\u043C KOMFORT - \u043B\u0443\u0447\u0448\u0430\u044F \u043C\u0435\u0431\u0435\u043B\u044C \u0434\u043B\u044F \u0432\u0430\u0448\u0435\u0433\u043E \u0434\u043E\u043C\u0430. \u0414\u0438\u0432\u0430\u043D\u044B, \u043A\u0440\u043E\u0432\u0430\u0442\u0438, \u043C\u0430\u0442\u0440\u0430\u0441\u044B, \u043A\u0443\u0445\u043D\u0438. \u0413\u0430\u0440\u0430\u043D\u0442\u0438\u044F \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0430."}),this.metaService.updateTag({name:"keywords",content:"KOMFORT, \u043C\u0435\u0431\u0435\u043B\u044C, \u0434\u0438\u0432\u0430\u043D\u044B, \u043A\u0440\u043E\u0432\u0430\u0442\u0438, \u043C\u0430\u0442\u0440\u0430\u0441\u044B, \u043A\u0443\u0445\u043D\u0438, \u0433\u043E\u0441\u0442\u0438\u043D\u044B\u0435, \u0441\u043F\u0430\u043B\u044C\u043D\u0438"})}isValidPhone(t){if(!t.trim())return!1;let e=t.replace(/\D/g,"");return e.length>=10&&e.length<=15}isValidName(t){return t.trim().length>=2&&t.trim().length<=50}onSubmit(){if(this.errorMessage="",!this.contactForm.name.trim()){this.errorMessage="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0438\u043C\u044F";return}if(!this.isValidName(this.contactForm.name)){this.errorMessage="\u0418\u043C\u044F \u0434\u043E\u043B\u0436\u043D\u043E \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u043E\u0442 2 \u0434\u043E 50 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432";return}if(!this.contactForm.phone.trim()){this.errorMessage="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430";return}if(!this.isValidPhone(this.contactForm.phone)){this.errorMessage="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 \u043D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430";return}if(!this.contactForm.agree){this.errorMessage="\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0441\u043E\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u0441\u044C \u0441 \u043F\u043E\u043B\u0438\u0442\u0438\u043A\u043E\u0439 \u043A\u043E\u043D\u0444\u0438\u0434\u0435\u043D\u0446\u0438\u0430\u043B\u044C\u043D\u043E\u0441\u0442\u0438";return}let t=Date.now();if(t-this.lastSubmitTime<this.MIN_SUBMIT_INTERVAL){let e=Math.ceil((this.MIN_SUBMIT_INTERVAL-(t-this.lastSubmitTime))/1e3);this.errorMessage=`\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435 ${e} \u0441\u0435\u043A\u0443\u043D\u0434 \u043F\u0435\u0440\u0435\u0434 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u043E\u0439`;return}this.isLoading=!0,this.lastSubmitTime=t,console.log("\u0424\u043E\u0440\u043C\u0430 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0430:",this.contactForm),this.saveApplicationToLocalStorage(),this.submitToServer(),this.isSubmitted=!0,this.isLoading=!1,setTimeout(()=>{this.resetForm()},5e3)}submitToServer(){this.http.post("https://\u0432\u0430\u0448-\u0434\u043E\u043C\u0435\u043D.ru/api/contact-form",{name:this.contactForm.name,phone:this.contactForm.phone,agree:this.contactForm.agree,timestamp:new Date().toISOString()}).subscribe({next:e=>{console.log("\u0417\u0430\u044F\u0432\u043A\u0430 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0430 \u043D\u0430 \u0441\u0435\u0440\u0432\u0435\u0440:",e)},error:e=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 \u043D\u0430 \u0441\u0435\u0440\u0432\u0435\u0440:",e),this.saveFailedSubmission()}})}saveFailedSubmission(){let t=JSON.parse(localStorage.getItem("failedContactSubmissions")||"[]");t.push(G(z({},this.contactForm),{date:new Date().toISOString()})),localStorage.setItem("failedContactSubmissions",JSON.stringify(t))}saveApplicationToLocalStorage(){let t=JSON.parse(localStorage.getItem("contactApplications")||"[]");t.push(G(z({},this.contactForm),{date:new Date().toISOString()})),localStorage.setItem("contactApplications",JSON.stringify(t))}callPhone(){if(this.contacts.phone){let t=this.contacts.phone.replace(/\D/g,"");window.location.href=`tel:${t}`}}sendEmail(){this.contacts.email&&(window.location.href=`mailto:${this.contacts.email}`)}resetForm(){this.contactForm={name:"",phone:"",agree:!1},this.isSubmitted=!1,this.errorMessage=""}get activeSocials(){return this.contacts.social.filter(t=>t.url&&t.url!=="#"&&t.url.trim()!=="")}static \u0275fac=function(e){return new(e||i)(x(_t),x(dt),x(R),x(H))};static \u0275cmp=M({type:i,selectors:[["app-contacts"]],decls:39,vars:3,consts:[["id","contacts",1,"contacts-section"],[1,"container"],[1,"section-title"],[1,"contacts-description"],[1,"contacts-wrapper"],[1,"contacts-column"],[1,"contact-item",3,"click"],[1,"contact-icon"],[1,"contact-value"],[1,"contact-item"],[1,"social-links"],[1,"social-icons"],["target","_blank",1,"social-link",3,"href"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-instagram-icon","lucide-instagram"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-send-icon","lucide-send"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-message-circle-icon","lucide-message-circle"],["width","20","height","20","x","2","y","2","rx","5","ry","5"],["d","M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"],["x1","17.5","x2","17.51","y1","6.5","y2","6.5"],["d","M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"],["d","m21.854 2.147-10.94 10.939"],["d","M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719"]],template:function(e,n){e&1&&(d(0,"section",0)(1,"div",1)(2,"h1",2),a(3,"\u041A\u041E\u041D\u0422\u0410\u041A\u0422\u042B"),p(),d(4,"p",3),a(5," \u0421\u0432\u044F\u0436\u0438\u0442\u0435\u0441\u044C \u0441 \u043D\u0430\u043C\u0438 \u043B\u044E\u0431\u044B\u043C \u0443\u0434\u043E\u0431\u043D\u044B\u043C \u0441\u043F\u043E\u0441\u043E\u0431\u043E\u043C "),p(),d(6,"div",4)(7,"div",5)(8,"div",6),S("click",function(){return n.callPhone()}),d(9,"span",7),a(10,"\u{1F4DE}"),p(),d(11,"div")(12,"h3"),a(13,"\u0422\u0435\u043B\u0435\u0444\u043E\u043D"),p(),d(14,"p",8),a(15),p()()(),d(16,"div",6),S("click",function(){return n.sendEmail()}),d(17,"span",7),a(18,"\u2709\uFE0F"),p(),d(19,"div")(20,"h3"),a(21,"Email"),p(),d(22,"p",8),a(23),p()()()(),d(24,"div",5)(25,"div",9)(26,"span",7),a(27,"\u{1F3E2}"),p(),d(28,"div")(29,"h3"),a(30,"\u041E\u0444\u0438\u0441 \u043F\u0440\u043E\u0434\u0430\u0436"),p(),d(31,"p",8),a(32),p()()(),d(33,"div",10)(34,"h3"),a(35,"\u041C\u044B \u0432 \u0441\u043E\u0446\u0441\u0435\u0442\u044F\u0445:"),p(),d(36,"div",11),F(37,De,5,2,"a",12,Ee),p()()()()()()),e&2&&(s(15),v(n.contacts.phone),s(8),v(n.contacts.email),s(9),v(n.contacts.office),s(5),D(n.contacts.social))},dependencies:[k,K],styles:['.contacts-section[_ngcontent-%COMP%]{padding:60px 0;background:#f8f9fa}.contacts-section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px}.contacts-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#333;font-size:42px;font-weight:800;text-transform:uppercase;letter-spacing:1px}.contacts-section[_ngcontent-%COMP%]   .contacts-description[_ngcontent-%COMP%]{text-align:center;margin-bottom:50px;color:#666;font-size:18px;max-width:800px;margin-left:auto;margin-right:auto}.contacts-section[_ngcontent-%COMP%]   .contacts-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:30px;max-width:900px;margin:0 auto 40px}@media(max-width:768px){.contacts-section[_ngcontent-%COMP%]   .contacts-wrapper[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px;max-width:100%}}.contacts-section[_ngcontent-%COMP%]   .contacts-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:25px}.contacts-section[_ngcontent-%COMP%]   .contact-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;padding:25px;background:#fff;border-radius:12px;box-shadow:0 4px 15px #0000001a;cursor:pointer;transition:all .3s ease;flex:1}.contacts-section[_ngcontent-%COMP%]   .contact-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 25px #00000026}.contacts-section[_ngcontent-%COMP%]   .contact-item[_ngcontent-%COMP%]   .contact-icon[_ngcontent-%COMP%]{font-size:28px;margin-right:20px;min-width:40px;display:flex;align-items:center;justify-content:center}.contacts-section[_ngcontent-%COMP%]   .contact-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;color:#333;font-size:20px;font-weight:700}.contacts-section[_ngcontent-%COMP%]   .contact-item[_ngcontent-%COMP%]   .contact-value[_ngcontent-%COMP%]{margin:0;color:#555;font-size:17px;font-weight:500;line-height:1.5}.contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{padding:25px;background:#fff;border-radius:12px;box-shadow:0 4px 15px #0000001a;flex:1;display:flex;flex-direction:column;justify-content:center}.contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:20px;color:#333;font-size:20px;font-weight:700;text-align:center}.contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;flex-wrap:wrap}.contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:50px;height:50px;border-radius:50%;text-decoration:none;font-weight:700;transition:all .3s}.contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]:hover{transform:scale(1.15);box-shadow:0 6px 20px #0003}.contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:26px;height:26px;stroke:#fff;stroke-width:2}.contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[href*=instagram][_ngcontent-%COMP%], .contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[href*=insta][_ngcontent-%COMP%]{background:#718096}.contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[href*=telegram][_ngcontent-%COMP%], .contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[href*="t.me"][_ngcontent-%COMP%]{background:#08c}.contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[href*=whatsapp][_ngcontent-%COMP%], .contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[href*="wa.me"][_ngcontent-%COMP%]{background:#25d366}.contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[href*=facebook][_ngcontent-%COMP%]{background:#4267b2}.contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[href*="vk.com"][_ngcontent-%COMP%]{background:#4c75a3}.contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[href*=youtube][_ngcontent-%COMP%]{background:red}.contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]:not([href*=instagram]):not([href*=telegram]):not([href*=whatsapp]):not([href*=facebook]):not([href*="vk.com"]):not([href*=youtube]){background:#718096}.contacts-section[_ngcontent-%COMP%]   .working-hours[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:25px;background:#fff;border-radius:12px;box-shadow:0 4px 15px #0000001a;text-align:center}.contacts-section[_ngcontent-%COMP%]   .working-hours[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;color:#333;font-size:20px;font-weight:700}.contacts-section[_ngcontent-%COMP%]   .working-hours[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;color:#555;font-size:16px;font-weight:500}@media(max-width:768px){.contacts-section[_ngcontent-%COMP%]{padding:40px 0}.contacts-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:32px}.contacts-section[_ngcontent-%COMP%]   .contacts-description[_ngcontent-%COMP%]{font-size:16px;margin-bottom:30px}.contacts-section[_ngcontent-%COMP%]   .contact-item[_ngcontent-%COMP%]{padding:20px}.contacts-section[_ngcontent-%COMP%]   .contact-item[_ngcontent-%COMP%]   .contact-icon[_ngcontent-%COMP%]{font-size:24px;margin-right:15px}.contacts-section[_ngcontent-%COMP%]   .contact-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}.contacts-section[_ngcontent-%COMP%]   .contact-item[_ngcontent-%COMP%]   .contact-value[_ngcontent-%COMP%]{font-size:16px}.contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{padding:20px}.contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}.contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]{gap:15px}.contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]{width:45px;height:45px}.contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.contacts-section[_ngcontent-%COMP%]   .working-hours[_ngcontent-%COMP%]{padding:20px}.contacts-section[_ngcontent-%COMP%]   .working-hours[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}.contacts-section[_ngcontent-%COMP%]   .working-hours[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px}}@media(max-width:480px){.contacts-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:28px}.contacts-section[_ngcontent-%COMP%]   .contacts-description[_ngcontent-%COMP%]{font-size:15px}.contacts-section[_ngcontent-%COMP%]   .contact-item[_ngcontent-%COMP%]{padding:15px}.contacts-section[_ngcontent-%COMP%]   .contact-item[_ngcontent-%COMP%]   .contact-icon[_ngcontent-%COMP%]{font-size:22px}.contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]{width:40px;height:40px}.contacts-section[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px}}']})};var Ae=(i,t)=>t.title;function je(i,t){if(i&1&&(r(0,"div",20)(1,"h2"),a(2),l(),b(3,"div",21),r(4,"p"),a(5),l()()),i&2){let e=g().$implicit;s(2),v(e.title),s(3),v(e.content)}}function ze(i,t){if(i&1&&C(0,je,6,2,"div",20),i&2){let e=t.$implicit;_(e.title&&e.content?0:-1)}}function Le(i,t){if(i&1&&(r(0,"p",11),a(1),l()),i&2){let e=g();s(),v(e.location.address)}}function Ve(i,t){if(i&1&&(r(0,"div",12)(1,"h3"),a(2,"\u0413\u0440\u0430\u0444\u0438\u043A \u0440\u0430\u0431\u043E\u0442\u044B \u0441\u043A\u043B\u0430\u0434\u0430:"),l(),r(3,"p"),a(4),l()()),i&2){let e=g();s(4),v(e.location.workHours)}}var it=class i{constructor(t,e){this.titleService=t;this.metaService=e}homeService=L(nt);destroy$=new Nt;aboutSections=[];location={address:"",workHours:"",mapUrl:"",coordinates:[43.513901,46.35629]};isMapLoaded=!1;ngOnInit(){this.loadCompanyInfo(),Gt(3e4).pipe(Wt(this.destroy$)).subscribe(()=>{this.loadCompanyInfo()}),this.titleService.setTitle("\u0422\u043E\u0440\u0433\u043E\u0432\u044B\u0439 \u0434\u043E\u043C KOMFORT - \u0413\u043B\u0430\u0432\u043D\u0430\u044F | \u041C\u0435\u0431\u0435\u043B\u044C \u0434\u043B\u044F \u0434\u043E\u043C\u0430"),this.metaService.updateTag({name:"description",content:"\u0422\u043E\u0440\u0433\u043E\u0432\u044B\u0439 \u0434\u043E\u043C KOMFORT - \u043B\u0443\u0447\u0448\u0430\u044F \u043C\u0435\u0431\u0435\u043B\u044C \u0434\u043B\u044F \u0432\u0430\u0448\u0435\u0433\u043E \u0434\u043E\u043C\u0430. \u0414\u0438\u0432\u0430\u043D\u044B, \u043A\u0440\u043E\u0432\u0430\u0442\u0438, \u043C\u0430\u0442\u0440\u0430\u0441\u044B, \u043A\u0443\u0445\u043D\u0438. \u0413\u0430\u0440\u0430\u043D\u0442\u0438\u044F \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0430."}),this.metaService.updateTag({name:"keywords",content:"KOMFORT, \u043C\u0435\u0431\u0435\u043B\u044C, \u0434\u0438\u0432\u0430\u043D\u044B, \u043A\u0440\u043E\u0432\u0430\u0442\u0438, \u043C\u0430\u0442\u0440\u0430\u0441\u044B, \u043A\u0443\u0445\u043D\u0438, \u0433\u043E\u0441\u0442\u0438\u043D\u044B\u0435, \u0441\u043F\u0430\u043B\u044C\u043D\u0438"})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadCompanyInfo(){let t=this.homeService.getCompanyInfo();t.aboutSections&&t.aboutSections.length>0?this.aboutSections=[...t.aboutSections]:this.aboutSections=this.getDefaultSections(),this.updateLocationInfo(t)}getDefaultSections(){return[{title:"\u041E\u043F\u044B\u0442",content:"\u041F\u0440\u043E\u0434\u0443\u043A\u0446\u0438\u044F Komfort \u0443\u0436\u0435 \u0431\u043E\u043B\u0435\u0435 13 \u043B\u0435\u0442 \u043F\u043E\u043B\u044C\u0437\u0443\u0435\u0442\u0441\u044F \u0443\u0441\u043F\u0435\u0445\u043E\u043C \u0443 \u043F\u043E\u043A\u0443\u043F\u0430\u0442\u0435\u043B\u0435\u0439 \u0438 \u0440\u0435\u0430\u043B\u0438\u0437\u0443\u0435\u0442\u0441\u044F \u0432\u043E \u043C\u043D\u043E\u0433\u0438\u0445 \u0440\u0435\u0433\u0438\u043E\u043D\u0430\u0445 \u0420\u043E\u0441\u0441\u0438\u0438, \u0430 \u0442\u0430\u043A\u0436\u0435 \u044D\u043A\u0441\u043F\u043E\u0440\u0442\u0438\u0440\u0443\u0435\u0442\u0441\u044F \u0432 \u0441\u0442\u0440\u0430\u043D\u044B \u0421\u041D\u0413 \u0438 \u0415\u0432\u0440\u043E\u043F\u0443. \u0428\u0438\u0440\u043E\u043A\u0438\u0439 \u0430\u0441\u0441\u043E\u0440\u0442\u0438\u043C\u0435\u043D\u0442 \u0438 \u0431\u043E\u043B\u044C\u0448\u0430\u044F \u0441\u043A\u043B\u0430\u0434\u0441\u043A\u0430\u044F \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430 \u043F\u043E\u0437\u0432\u043E\u043B\u044F\u044E\u0442 \u043D\u0430\u0448\u0438\u043C \u043A\u043B\u0438\u0435\u043D\u0442\u0430\u043C \u0431\u044B\u0441\u0442\u0440\u043E \u0438 \u0432\u044B\u0433\u043E\u0434\u043D\u043E \u0434\u0435\u043B\u0430\u0442\u044C \u0441 \u043D\u0430\u043C\u0438 \u0431\u0438\u0437\u043D\u0435\u0441."},{title:"\u0421\u043E\u0432\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0439 \u043C\u043E\u0434\u0435\u043B\u044C\u043D\u044B\u0439 \u0440\u044F\u0434",content:"Komfort \u0441\u043B\u0435\u0434\u0438\u0442 \u0437\u0430 \u0442\u0435\u043D\u0434\u0435\u043D\u0446\u0438\u044F\u043C\u0438 \u043D\u0430 \u0440\u044B\u043D\u043A\u0435 \u0442\u043E\u0432\u0430\u0440\u043E\u0432 \u0434\u043B\u044F \u0434\u043E\u043C\u0430 \u0438 \u0441\u0432\u0435\u0436\u0438\u043C\u0438 \u0438\u0434\u0435\u044F\u043C\u0438 \u0432 \u0434\u0438\u0437\u0430\u0439\u043D\u0435 \u0438\u043D\u0442\u0435\u0440\u044C\u0435\u0440\u043E\u0432. \u041D\u0430\u0448 \u043A\u043E\u043B\u043B\u0435\u043A\u0442\u0438\u0432 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043F\u043E\u0441\u0442\u043E\u044F\u043D\u043D\u044B\u043C \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u043E\u043C \u043C\u0435\u0436\u0434\u0443\u043D\u0430\u0440\u043E\u0434\u043D\u044B\u0445 \u0432\u044B\u0441\u0442\u0430\u0432\u043E\u043A \u0438 \u0444\u043E\u0440\u0443\u043C\u043E\u0432, \u0433\u0434\u0435 \u043D\u0430\u0431\u0438\u0440\u0430\u0435\u0442\u0441\u044F \u043E\u043F\u044B\u0442\u0430 \u0438 \u0434\u0435\u043B\u0438\u0442\u0441\u044F \u0441\u0432\u043E\u0438\u043C. \u041F\u0440\u043E\u0434\u0443\u043A\u0446\u0438\u044F \u043F\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043B\u0435\u043D\u0430 \u0431\u043E\u043B\u0435\u0435 \u0447\u0435\u043C \u0432 50 \u0441\u0430\u043B\u043E\u043D\u0430\u0445 \u043F\u043E \u0432\u0441\u0435\u0439 \u0441\u0442\u0440\u0430\u043D\u0435."},{title:"\u041F\u0440\u043E\u0438\u0437\u0432\u043E\u0434\u0441\u0442\u0432\u043E",content:"\u041F\u0440\u043E\u0438\u0437\u0432\u043E\u0434\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u043A\u043E\u043C\u043F\u043B\u0435\u043A\u0441 \u0437\u0430\u043D\u0438\u043C\u0430\u0435\u0442 15 000 \u043A\u0432. \u043C \u0438 \u0432\u043A\u043B\u044E\u0447\u0430\u0435\u0442 \u0432 \u0441\u0435\u0431\u044F 7 \u0446\u0435\u0445\u043E\u0432 \u043F\u043E\u043B\u043D\u043E\u0433\u043E \u0446\u0438\u043A\u043B\u0430 \u043F\u0440\u043E\u0438\u0437\u0432\u043E\u0434\u0441\u0442\u0432\u0430 \u043C\u0435\u0431\u0435\u043B\u0438 \u0438 \u0434\u043E\u043C\u0430\u0448\u043D\u0435\u0433\u043E \u0442\u0435\u043A\u0441\u0442\u0438\u043B\u044F \u043D\u0430 \u043E\u0431\u043E\u0440\u0443\u0434\u043E\u0432\u0430\u043D\u0438\u0438 \u0432\u0435\u0434\u0443\u0449\u0438\u0445 \u043C\u0438\u0440\u043E\u0432\u044B\u0445 \u043F\u0440\u043E\u0438\u0437\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u0435\u0439. \u041E\u0441\u043E\u0431\u043E\u0435 \u0432\u043D\u0438\u043C\u0430\u043D\u0438\u0435 \u043C\u044B \u0443\u0434\u0435\u043B\u044F\u0435\u043C \u043F\u043E\u0434\u0431\u043E\u0440\u0443 \u0441\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A\u043E\u0432, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u0448 \u043A\u043E\u043B\u043B\u0435\u043A\u0442\u0438\u0432 \u043F\u0440\u0438\u0440\u0430\u0441\u0442\u0430\u043B \u0442\u043E\u043B\u044C\u043A\u043E \u043F\u0440\u043E\u0444\u0435\u0441\u0441\u0438\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u043C\u0438 \u0438 \u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u043C\u0438 \u043B\u044E\u0434\u044C\u043C\u0438."}]}updateLocationInfo(t){let e=t.address||"\u0427\u0435\u0447\u0435\u043D\u0441\u043A\u0430\u044F \u0420\u0435\u0441\u043F\u0443\u0431\u043B\u0438\u043A\u0430, \u0433. \u0428\u0435\u043B\u043A\u043E\u0432\u0441\u043A\u0430\u044F, \u0443\u043B. \u041A\u043E\u0441\u0430\u044F, 47",n=t.workHours||"\u041F\u041D - \u0412\u0421 \u0441 8:00 \u0434\u043E 20:00";(this.location.address!==e||this.location.workHours!==n)&&(this.location.address=e,this.location.workHours=n,this.location.mapUrl=`https://yandex.ru/maps/?text=${encodeURIComponent(e)}`,this.isMapLoaded&&this.initYandexMap())}ngAfterViewInit(){this.loadYandexMaps()}loadYandexMaps(){if(typeof ymaps<"u"){this.initYandexMap();return}let t=document.createElement("script");t.src="https://api-maps.yandex.ru/2.1/?apikey=699ae714-9987-4640-90db-d20caf965609&lang=ru_RU",t.async=!0,t.onload=()=>{this.initYandexMap()},t.onerror=()=>{console.error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u042F\u043D\u0434\u0435\u043A\u0441.\u041A\u0430\u0440\u0442\u044B"),this.showStaticMapFallback()},document.head.appendChild(t)}initYandexMap(){ymaps.ready(()=>{try{let t=document.getElementById("yandex-map");if(!t){console.error("\u042D\u043B\u0435\u043C\u0435\u043D\u0442 \u043A\u0430\u0440\u0442\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D");return}t.innerHTML="",ymaps.geocode(this.location.address,{results:1}).then(e=>{let n=e.geoObjects.get(0),o;n?(o=n.geometry.getCoordinates(),this.location.coordinates=o):o=this.location.coordinates,this.createMap(o)}).catch(()=>{this.createMap(this.location.coordinates)})}catch(t){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0438 \u043A\u0430\u0440\u0442\u044B:",t),this.showStaticMapFallback()}})}createMap(t){if(!document.getElementById("yandex-map"))return;let n=new ymaps.Map("yandex-map",{center:t,zoom:15,controls:["zoomControl","fullscreenControl"]}),o=new ymaps.Placemark(t,{balloonContent:`
        <strong>\u041A\u043E\u043C\u043F\u0430\u043D\u0438\u044F Komfort</strong><br/>
        ${this.location.address}<br/>
        ${this.location.workHours}
      `,hintContent:"\u041A\u043E\u043C\u043F\u0430\u043D\u0438\u044F Komfort"},{preset:"islands#redIcon",iconColor:"#ff6b6b"});n.geoObjects.add(o),this.isMapLoaded=!0}showStaticMapFallback(){let t=document.getElementById("yandex-map");t&&(t.innerHTML=`
        <div style="padding: 20px; text-align: center;">
          <p>\u041A\u0430\u0440\u0442\u0430 \u0432\u0440\u0435\u043C\u0435\u043D\u043D\u043E \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u0430</p>
          <p><strong>\u0410\u0434\u0440\u0435\u0441:</strong> ${this.location.address}</p>
          <p><strong>\u0413\u0440\u0430\u0444\u0438\u043A \u0440\u0430\u0431\u043E\u0442\u044B:</strong> ${this.location.workHours}</p>
          <a href="${this.location.mapUrl}" target="_blank" style="color: #007bff;">
            \u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0432 \u042F\u043D\u0434\u0435\u043A\u0441.\u041A\u0430\u0440\u0442\u0430\u0445
          </a>
        </div>
      `)}printMap(){window.print()}openMap(){window.open(this.location.mapUrl,"_blank")}static \u0275fac=function(e){return new(e||i)(x(R),x(H))};static \u0275cmp=M({type:i,selectors:[["app-about"]],decls:36,vars:2,consts:[[1,"about-komfort"],[1,"about-section"],[1,"container"],[1,"section-title"],[1,"about-content"],[1,"map-section"],[1,"map-wrapper"],[1,"map-info"],[1,"address-card"],[1,"address-header"],[1,"print-btn",3,"click"],[1,"address"],[1,"work-hours"],[1,"map-preview"],["id","yandex-map",1,"map-container"],[1,"map-legend"],[1,"legend-item"],[1,"legend-dot","car"],[1,"legend-dot","taxi"],[1,"open-map-btn",3,"click"],[1,"about-card"],[1,"divider"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"section",1)(2,"div",2)(3,"h1",3),a(4,"\u041E \u041A\u041E\u041C\u041F\u0410\u041D\u0418\u0418"),l(),r(5,"div",4),F(6,ze,1,1,null,null,Ae),l()()(),r(8,"section",5)(9,"div",2)(10,"div",6)(11,"div",7)(12,"h1",3),a(13,"\u0421\u0425\u0415\u041C\u0410 \u041F\u0420\u041E\u0415\u0417\u0414\u0410"),l(),r(14,"div",8)(15,"div",9)(16,"h3"),a(17,"\u0410\u0434\u0440\u0435\u0441 \u0441\u043A\u043B\u0430\u0434\u0430:"),l(),r(18,"button",10),h("click",function(){return n.printMap()}),a(19,"\u0440\u0430\u0441\u043F\u0435\u0447\u0430\u0442\u0430\u0442\u044C \u0441\u0445\u0435\u043C\u0443 \u043F\u0440\u043E\u0435\u0437\u0434\u0430"),l()(),C(20,Le,2,1,"p",11),C(21,Ve,5,1,"div",12),r(22,"div",13),b(23,"div",14),r(24,"div",15)(25,"div",16),b(26,"span",17),r(27,"span"),a(28,"\u041D\u0430 \u043C\u0430\u0448\u0438\u043D\u0435"),l()(),r(29,"div",16),b(30,"span",18),r(31,"span"),a(32,"\u041D\u0430 \u0442\u0430\u043A\u0441\u0438"),l()()()(),r(33,"button",19),h("click",function(){return n.openMap()}),a(34," \u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0432 \u042F\u043D\u0434\u0435\u043A\u0441.\u041A\u0430\u0440\u0442\u0430\u0445 "),l()()()()()()(),b(35,"app-contacts")),e&2&&(s(6),D(n.aboutSections),s(14),_(n.location.address?20:-1),s(),_(n.location.workHours?21:-1))},dependencies:[k,K,ot],styles:['@charset "UTF-8";.about-komfort[_ngcontent-%COMP%]{font-family:Geometria,Montserrat,sans-serif}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px}.section-title[_ngcontent-%COMP%]{font-size:42px;font-weight:800;text-align:center;margin-bottom:40px;color:#000;text-transform:uppercase;letter-spacing:1px}.about-section[_ngcontent-%COMP%]{padding:60px 0;background:#fff}.about-content[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.about-card[_ngcontent-%COMP%]{margin-bottom:40px;padding-bottom:40px;border-bottom:2px solid #e0e0e0}.about-card[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0;padding-bottom:0}.about-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#333;margin-bottom:15px}.about-card[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:3px;width:60px;background:#ff6b6b;margin-bottom:20px}.about-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:1.6;color:#666}.map-section[_ngcontent-%COMP%]{padding:60px 0;background:#f8f9fa}.map-wrapper[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.address-card[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:12px;box-shadow:0 4px 15px #0000001a}.address-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.address-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#333;margin:0}.print-btn[_ngcontent-%COMP%]{background:none;border:none;color:#667eea;font-size:14px;cursor:pointer;text-decoration:underline}.print-btn[_ngcontent-%COMP%]:hover{color:#ff6b6b}.address[_ngcontent-%COMP%]{font-size:18px;color:#333;margin-bottom:30px;font-weight:500}.work-hours[_ngcontent-%COMP%]{margin-bottom:30px}.work-hours[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;color:#666;margin-bottom:8px}.work-hours[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;color:#333;font-weight:500}.map-preview[_ngcontent-%COMP%]{margin:30px 0;position:relative}@media(max-width:768px){.map-container[_ngcontent-%COMP%]{height:300px}}.map-container[_ngcontent-%COMP%]{width:100%;height:400px;border-radius:8px;overflow:hidden;box-shadow:0 4px 12px #0000001a}.map-placeholder[_ngcontent-%COMP%]{background:#e9ecef;border-radius:8px;padding:30px;position:relative;min-height:300px}.map-points[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:15px;margin-bottom:30px}.point[_ngcontent-%COMP%]{background:#fff;padding:12px 15px;border-radius:6px;border-left:4px solid #667eea;font-size:14px;box-shadow:0 2px 4px #0000001a}.point.point-main[_ngcontent-%COMP%]{border-left-color:#ff6b6b;font-weight:600;background:#fff5f5}.map-legend[_ngcontent-%COMP%]{display:flex;gap:20px;padding-top:20px;border-top:1px solid #dee2e6}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#666}.legend-dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%}.legend-dot.car[_ngcontent-%COMP%]{background:#667eea}.legend-dot.taxi[_ngcontent-%COMP%]{background:#ff6b6b}.open-map-btn[_ngcontent-%COMP%]{width:100%;padding:16px;background:#ff6b6b;color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:background .3s ease}.open-map-btn[_ngcontent-%COMP%]:hover{background:#f54a4a}']})};var St=class i{constructor(t,e){this.titleService=t;this.metaService=e}ngOnInit(){this.titleService.setTitle("\u0422\u043E\u0440\u0433\u043E\u0432\u044B\u0439 \u0434\u043E\u043C KOMFORT - \u0413\u043B\u0430\u0432\u043D\u0430\u044F | \u041C\u0435\u0431\u0435\u043B\u044C \u0434\u043B\u044F \u0434\u043E\u043C\u0430"),this.metaService.updateTag({name:"description",content:"\u0422\u043E\u0440\u0433\u043E\u0432\u044B\u0439 \u0434\u043E\u043C KOMFORT - \u043B\u0443\u0447\u0448\u0430\u044F \u043C\u0435\u0431\u0435\u043B\u044C \u0434\u043B\u044F \u0432\u0430\u0448\u0435\u0433\u043E \u0434\u043E\u043C\u0430. \u0414\u0438\u0432\u0430\u043D\u044B, \u043A\u0440\u043E\u0432\u0430\u0442\u0438, \u043C\u0430\u0442\u0440\u0430\u0441\u044B, \u043A\u0443\u0445\u043D\u0438. \u0413\u0430\u0440\u0430\u043D\u0442\u0438\u044F \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0430."}),this.metaService.updateTag({name:"keywords",content:"KOMFORT, \u043C\u0435\u0431\u0435\u043B\u044C, \u0434\u0438\u0432\u0430\u043D\u044B, \u043A\u0440\u043E\u0432\u0430\u0442\u0438, \u043C\u0430\u0442\u0440\u0430\u0441\u044B, \u043A\u0443\u0445\u043D\u0438, \u0433\u043E\u0441\u0442\u0438\u043D\u044B\u0435, \u0441\u043F\u0430\u043B\u044C\u043D\u0438"})}static \u0275fac=function(e){return new(e||i)(x(R),x(H))};static \u0275cmp=M({type:i,selectors:[["app-home"]],decls:3,vars:0,template:function(e,n){e&1&&b(0,"app-slider")(1,"app-catalog")(2,"app-about")},dependencies:[vt,Pt,it],encapsulation:2})};function Ue(i,t){if(i&1){let e=P();d(0,"div",13)(1,"button",14),S("click",function(o){u(e);let c=g();return o.stopPropagation(),m(c.prevImage(o))}),a(2,"\u2039"),p(),d(3,"button",15),S("click",function(o){u(e);let c=g();return o.stopPropagation(),m(c.nextImage(o))}),a(4,"\u203A"),p()(),d(5,"div",16),a(6),p()}if(i&2){let e=g();s(6),ct(" ",e.currentImageIndex+1," / ",e.product.imageUrls.length," ")}}function $e(i,t){if(i&1&&(d(0,"li",18)(1,"span",20),a(2,"\u2713"),p(),a(3),p()),i&2){let e=t.$implicit;s(3),T(" ",e," ")}}function Be(i,t){if(i&1&&(d(0,"div",19),a(1),p()),i&2){let e=g(2);s(),T(" + \u0435\u0449\u0451 ",e.product.features.length-3," \u043E\u0441\u043E\u0431\u0435\u043D\u043D\u043E\u0441\u0442\u0435\u0439 ")}}function Ne(i,t){if(i&1&&(d(0,"div",9)(1,"ul",17),F(2,$e,4,1,"li",18,jt),p(),C(4,Be,2,1,"div",19),p()),i&2){let e=g();s(2),D(e.getFirstFeatures(3)),s(2),_(e.product.features.length>3?4:-1)}}function He(i,t){if(i&1&&(d(0,"p",10),a(1),rt(2,"slice"),p()),i&2){let e=g();s(),ct(" ",Zt(2,2,e.product.description,0,120),"",e.product.description.length>120?"...":""," ")}}function Re(i,t){if(i&1){let e=P();d(0,"div",11)(1,"button",21),S("click",function(){u(e);let o=g();return m(o.editProduct())}),a(2,"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"),p(),d(3,"button",22),S("click",function(){u(e);let o=g();return m(o.deleteProduct())}),a(4,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"),p()()}}function Ge(i,t){if(i&1){let e=P();d(0,"img",34),S("click",function(){let o=u(e).$index,c=g(3);return m(c.setGalleryImage(o))}),p()}if(i&2){let e=t.$implicit,n=t.$index,o=g(3);E("active",o.currentImageIndex===n),V("src",e,I)("alt","\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 "+(n+1))}}function We(i,t){if(i&1){let e=P();d(0,"div",28)(1,"button",29),S("click",function(o){u(e);let c=g(2);return m(c.prevImage(o))}),a(2,"\u2039"),p(),d(3,"button",30),S("click",function(o){u(e);let c=g(2);return m(c.nextImage(o))}),a(4,"\u203A"),p()(),d(5,"div",31),F(6,Ge,1,4,"img",32,jt),p(),d(8,"div",33),a(9),p()}if(i&2){let e=g(2);s(6),D(e.getGalleryImages()),s(3),ct(" ",e.currentImageIndex+1," / ",e.product.imageUrls.length," ")}}function Ke(i,t){if(i&1){let e=P();d(0,"div",23),S("click",function(o){u(e);let c=g();return m(c.closeGallery(o))}),d(1,"div",24),S("click",function(o){return u(e),m(o.stopPropagation())}),d(2,"button",25),S("click",function(o){u(e);let c=g();return m(c.closeGallery(o))}),a(3,"\xD7"),p(),d(4,"div",26),A(5,"img",27),p(),C(6,We,10,2),p()()}if(i&2){let e=g();s(5),V("src",e.getCurrentImageUrl(),I)("alt",e.product.name),s(),_(e.product.imageUrls&&e.product.imageUrls.length>1?6:-1)}}var Ot=class i{product;isAdmin=!1;productEdit=new at;productDelete=new at;productViewDetails=new at;productAddToCart=new at;currentImageIndex=0;showImageGallery=!1;getFirstFeatures(t){return!this.product.features||this.product.features.length===0?[]:this.product.features.slice(0,t)}viewDetails(){console.log("\u041F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u0442\u043E\u0432\u0430\u0440\u0430:",this.product.name),this.productViewDetails.emit(this.product)}addToCart(){this.product.stock>0&&(console.log("\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 \u043A\u043E\u0440\u0437\u0438\u043D\u0443:",this.product.name),this.productAddToCart.emit(this.product),alert(`${this.product.name} \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 \u043A\u043E\u0440\u0437\u0438\u043D\u0443!`))}editProduct(){this.productEdit.emit(this.product)}deleteProduct(){confirm(`\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0442\u043E\u0432\u0430\u0440 "${this.product.name}"?`)&&this.productDelete.emit(this.product.id)}getCurrentImageUrl(){return!this.product?.imageUrls||this.product.imageUrls.length===0?this.getFallbackImage():this.getSafeImageUrl(this.product.imageUrls[this.currentImageIndex])}getGalleryImages(){return!this.product?.imageUrls||this.product.imageUrls.length===0?[this.getFallbackImage()]:this.product.imageUrls.map(t=>this.getSafeImageUrl(t))}nextImage(t){t.stopPropagation(),this.product.imageUrls&&this.product.imageUrls.length>1&&(this.currentImageIndex=(this.currentImageIndex+1)%this.product.imageUrls.length)}prevImage(t){t.stopPropagation(),this.product.imageUrls&&this.product.imageUrls.length>1&&(this.currentImageIndex=(this.currentImageIndex-1+this.product.imageUrls.length)%this.product.imageUrls.length)}openGallery(){this.showImageGallery=!0}closeGallery(t){t&&t.stopPropagation(),this.showImageGallery=!1}setGalleryImage(t){this.currentImageIndex=t}getSafeImageUrl(t){if(!t||t.trim()==="")return this.getFallbackImage();if(this.isBrokenLocalFile(t))return console.warn(`\u26A0\uFE0F \u0417\u0430\u043C\u0435\u043D\u044F\u0435\u043C \u0431\u0438\u0442\u044B\u0439 \u0444\u0430\u0439\u043B \u043D\u0430 \u0434\u0435\u0444\u043E\u043B\u0442\u043D\u043E\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435: ${t}`),this.getFallbackImage();if(t.startsWith("/assets/")||t.startsWith("http://")||t.startsWith("https://"))return t;if(t.startsWith("assets/"))return"/"+t;if(t.endsWith(".jpg")||t.endsWith(".jpeg")||t.endsWith(".png")||t.endsWith(".gif")){let e=t.split("/").pop()||t;return["sofa1.jpg","bed1.jpg","IMG_2006.jpg","livingroom.jpg","bedroom.jpg","kitchen.jpg","default-product.jpg","slide1.jpeg","slide2.jpg","slide3.jpeg","slide4.jpg","default-shop.jpg","shop1.jpg","shop2.jpg"].includes(e)?`/assets/${e}`:this.getFallbackImage()}return this.getFallbackImage()}isBrokenLocalFile(t){return t?["20101581_1.jpg","assets/20101581_1.jpg","/assets/20101581_1.jpg","//assets/20101581_1.jpg"].some(n=>t.includes(n)):!1}getFallbackImage(){return"/assets/default-product.jpg"}handleImageError(t){let e=t.target,n=e.src;if(console.warn("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435:",n),this.isBrokenLocalFile(n)){console.log(`\u{1F504} \u0417\u0430\u043C\u0435\u043D\u044F\u0435\u043C \u0431\u0438\u0442\u044B\u0439 \u0444\u0430\u0439\u043B ${n} \u043D\u0430 \u0434\u0435\u0444\u043E\u043B\u0442\u043D\u043E\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435`),e.src=this.getFallbackImage();return}n.includes("/products/")?e.src=n.replace("/products/","/"):n.includes("/assets/")&&(e.src=this.getFallbackImage())}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-product-card"]],inputs:{product:"product",isAdmin:"isAdmin"},outputs:{productEdit:"productEdit",productDelete:"productDelete",productViewDetails:"productViewDetails",productAddToCart:"productAddToCart"},decls:19,vars:16,consts:[[1,"product-card"],[1,"product-image-container"],[1,"product-image",3,"click"],[1,"main-image",3,"error","src","alt"],[1,"product-category"],[1,"product-stock"],[1,"product-info"],[1,"product-title"],[1,"product-price"],[1,"product-features"],[1,"product-description"],[1,"admin-actions"],[1,"gallery-overlay"],[1,"image-nav"],[1,"nav-btn","prev",3,"click"],[1,"nav-btn","next",3,"click"],[1,"image-counter"],[1,"features-list"],[1,"feature-item"],[1,"more-features"],[1,"feature-icon"],[1,"btn-edit",3,"click"],[1,"btn-delete",3,"click"],[1,"gallery-overlay",3,"click"],[1,"gallery-content",3,"click"],[1,"gallery-close",3,"click"],[1,"gallery-main"],[1,"gallery-image",3,"src","alt"],[1,"gallery-nav"],[1,"gallery-prev",3,"click"],[1,"gallery-next",3,"click"],[1,"gallery-thumbnails"],[3,"src","alt","active"],[1,"gallery-counter"],[3,"click","src","alt"]],template:function(e,n){e&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),S("click",function(){return n.openGallery()}),d(3,"img",3),S("error",function(c){return n.handleImageError(c)}),p(),C(4,Ue,7,2),d(5,"div",4),a(6),p(),d(7,"div",5),a(8),p()()(),d(9,"div",6)(10,"h3",7),a(11),p(),d(12,"div",8),a(13),rt(14,"number"),p(),C(15,Ne,5,1,"div",9),C(16,He,3,6,"p",10),C(17,Re,5,0,"div",11),p(),C(18,Ke,7,3,"div",12),p()),e&2&&(s(3),V("src",n.getCurrentImageUrl(),I)("alt",n.product.name),s(),_(n.product.imageUrls&&n.product.imageUrls.length>1&&!n.showImageGallery?4:-1),s(2),v(n.product.categoryName||n.product.category),s(),E("low-stock",n.product.stock<3),s(),T(" ",n.product.stock," \u0432 \u043D\u0430\u043B\u0438\u0447\u0438\u0438 "),s(3),v(n.product.name),s(2),T(" ",Qt(14,13,n.product.price,"1.0-0")," \u20BD "),s(2),_(n.product.features&&n.product.features.length>0?15:-1),s(),_(n.product.description?16:-1),s(),_(n.isAdmin?17:-1),s(),_(n.showImageGallery?18:-1))},dependencies:[k,oe,ne],styles:[".product-image[_ngcontent-%COMP%], .gallery-overlay[_ngcontent-%COMP%], .gallery-content[_ngcontent-%COMP%], .gallery-main[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{-webkit-backface-visibility:hidden;backface-visibility:hidden;transform:translateZ(0)}.product-card[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;overflow:hidden;background:#fff;height:100%;font-family:Geometria,Montserrat,sans-serif}.product-image[_ngcontent-%COMP%]{position:relative;height:200px;overflow:hidden}.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.product-category[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;background:#ff6b6be6;color:#fff;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500}.product-stock[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:#ffffffe6;padding:4px 8px;border-radius:4px;font-size:12px}.product-stock.low-stock[_ngcontent-%COMP%]{background:#ff6b6be6;color:#fff}.image-nav[_ngcontent-%COMP%]{position:absolute;top:50%;left:0;right:0;display:flex;justify-content:space-between;padding:0 10px;transform:translateY(-50%);opacity:.9;pointer-events:none}.nav-btn[_ngcontent-%COMP%]{background:#fffc;border:none;width:30px;height:30px;border-radius:50%;cursor:pointer;font-size:18px;display:flex;align-items:center;justify-content:center;pointer-events:all}.nav-btn.prev[_ngcontent-%COMP%]{margin-left:-5px}.nav-btn.next[_ngcontent-%COMP%]{margin-right:-5px}.image-counter[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:50%;transform:translate(-50%);background:#000000b3;color:#fff;padding:2px 8px;border-radius:12px;font-size:11px}.gallery-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000f2;z-index:1000;display:flex;align-items:center;justify-content:center}.gallery-content[_ngcontent-%COMP%]{position:relative;max-width:90%;max-height:90%;width:800px;background:transparent}.gallery-close[_ngcontent-%COMP%]{position:absolute;top:-40px;right:0;background:none;border:none;color:#fff;font-size:30px;cursor:pointer;z-index:1001}.gallery-main[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.gallery-main[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:70vh;object-fit:contain}.gallery-nav[_ngcontent-%COMP%]{position:absolute;top:50%;left:0;right:0;display:flex;justify-content:space-between;padding:0 20px;transform:translateY(-50%)}.gallery-prev[_ngcontent-%COMP%], .gallery-next[_ngcontent-%COMP%]{background:#fff3;border:none;width:40px;height:40px;border-radius:50%;color:#fff;font-size:24px;cursor:pointer;display:flex;align-items:center;justify-content:center}.product-info[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;height:calc(100% - 200px)}.product-name[_ngcontent-%COMP%]{margin:0 0 10px;font-size:18px;font-weight:600;color:#333}.product-description[_ngcontent-%COMP%]{color:#666;font-size:14px;margin-bottom:15px;line-height:1.5;flex-grow:1}.product-features[_ngcontent-%COMP%]{margin-bottom:15px}.product-features[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px}.product-features[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#555;font-size:13px;margin-bottom:5px}.product-footer[_ngcontent-%COMP%]{margin-top:15px;display:flex;flex-direction:column;gap:10px}.product-price[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#ff6b6b;text-align:center}.product-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.admin-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}.admin-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:10px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500;font-family:Geometria,Montserrat,sans-serif}.btn-edit[_ngcontent-%COMP%]{background:#4dabf7;color:#fff}.btn-delete[_ngcontent-%COMP%]{background:#ff6b6b;color:#fff}.btn-buy[_ngcontent-%COMP%]{width:100%;padding:12px 16px;background:#40c057;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:16px;font-weight:500;font-family:Geometria,Montserrat,sans-serif}@media(max-width:768px){.product-image[_ngcontent-%COMP%]{height:180px}.product-info[_ngcontent-%COMP%]{padding:15px;height:calc(100% - 180px)}.product-name[_ngcontent-%COMP%]{font-size:16px}.product-price[_ngcontent-%COMP%]{font-size:18px}.admin-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.admin-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})};function Ye(i,t){if(i&1){let e=P();r(0,"button",3),h("click",function(){let o=u(e).$implicit,c=g();return m(c.filterByCategory(o.id,o.title))}),a(1),l()}if(i&2){let e=t.$implicit,n=g();E("active",n.selectedCategory()===e.id),s(),T(" ",e.title," ")}}function Je(i,t){if(i&1&&b(0,"app-product-card",8),i&2){let e=t.$implicit;O("product",e)("isAdmin",!1)}}function Xe(i,t){i&1&&(r(0,"div",9)(1,"p"),a(2,"\u0412 \u044D\u0442\u043E\u0439 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 \u043F\u043E\u043A\u0430 \u043D\u0435\u0442 \u0442\u043E\u0432\u0430\u0440\u043E\u0432"),l()())}var st=class i{constructor(t){this.productService=t}route=L(ce);router=L(B);catalogService=L(W);allProducts=$([],{});filteredProducts=$([],{});selectedCategory=$("all",{});categories=$([],{});ngOnInit(){console.log("=== \u0418\u041D\u0418\u0426\u0418\u0410\u041B\u0418\u0417\u0410\u0426\u0418\u042F \u041A\u0410\u0422\u0410\u041B\u041E\u0413\u0410 \u0422\u041E\u0412\u0410\u0420\u041E\u0412 ===");let t=this.catalogService.getCategories();console.log("\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439:",t.length),t.forEach(n=>{console.log(`\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F: ${n.title} (ID: ${n.id}, Slug: ${n.slug})`)}),this.categories.set(t);let e=this.productService.getProductsArray();console.log("\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E \u0442\u043E\u0432\u0430\u0440\u043E\u0432:",e.length),e.forEach(n=>{console.log(`\u0422\u043E\u0432\u0430\u0440: "${n.name}", categoryId: ${n.categoryId}, categoryName: "${n.categoryName}"`)}),this.allProducts.set(e),this.filteredProducts.set(e),this.route.paramMap.subscribe(n=>{console.log("\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B URL \u0438\u0437\u043C\u0435\u043D\u0438\u043B\u0438\u0441\u044C:",n);let o=n.get("category");if(console.log("categorySlug \u0438\u0437 URL:",o),o){let c=this.categories().find(f=>(console.log(`\u0418\u0449\u0435\u043C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E \u043F\u043E slug: ${f.slug} === ${o}?`),f.slug===o));console.log("\u041D\u0430\u0439\u0434\u0435\u043D\u0430 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F \u043F\u043E slug:",c),c?(console.log(`\u0424\u0438\u043B\u044C\u0442\u0440\u0443\u0435\u043C \u0442\u043E\u0432\u0430\u0440\u044B \u0434\u043B\u044F \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438: ${c.title} (ID: ${c.id})`),this.filterByCategory(c.id,c.title)):(console.log("\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430 \u043F\u043E slug:",o),this.loadAllProducts())}else console.log("\u041D\u0435\u0442 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u0430 category \u0432 URL, \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u043C \u0432\u0441\u0435 \u0442\u043E\u0432\u0430\u0440\u044B"),this.loadAllProducts()})}loadAllProducts(){console.log("\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u043C \u0432\u0441\u0435 \u0442\u043E\u0432\u0430\u0440\u044B"),this.filteredProducts.set(this.allProducts()),this.selectedCategory.set("all")}filterByCategory(t,e){console.log("=== \u0424\u0418\u041B\u042C\u0422\u0420\u0410\u0426\u0418\u042F \u041F\u041E \u041A\u0410\u0422\u0415\u0413\u041E\u0420\u0418\u0418 ==="),console.log("categoryId:",t),console.log("categoryTitle:",e),this.selectedCategory.set(t);let n=this.productService.getProductsByCategoryId(t);if(console.log("\u041D\u0430\u0439\u0434\u0435\u043D\u043E \u0442\u043E\u0432\u0430\u0440\u043E\u0432 \u0432 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438:",n.length),n.forEach(o=>{console.log(`- ${o.name} (categoryId: ${o.categoryId})`)}),this.filteredProducts.set(n),e){let o=this.categories().find(c=>c.id===t);o&&(console.log("\u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C URL \u043D\u0430:",["/catalog",o.slug]),this.router.navigate(["/catalog",o.slug]))}}filterByCategoryName(t){if(console.log("\u0424\u0438\u043B\u044C\u0442\u0440\u0430\u0446\u0438\u044F \u043F\u043E \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044E \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438:",t),t==="all")this.router.navigate(["/catalog"]),this.loadAllProducts();else{let e=this.categories().find(n=>n.title.toLowerCase()===t.toLowerCase());e?this.filterByCategory(e.id,e.title):console.log("\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430 \u043F\u043E \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044E:",t)}}static \u0275fac=function(e){return new(e||i)(x(xt))};static \u0275cmp=M({type:i,selectors:[["app-products-catalog"]],decls:11,vars:5,consts:[[1,"catalog-container"],[1,"catalog-header"],[1,"category-filter"],[1,"category-btn",3,"click"],["class","category-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"products-grid"],[3,"product","isAdmin",4,"ngFor","ngForOf"],["class","no-products",4,"ngIf"],[3,"product","isAdmin"],[1,"no-products"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"h1"),a(3,"\u041D\u0430\u0448 \u043A\u0430\u0442\u0430\u043B\u043E\u0433 \u0442\u043E\u0432\u0430\u0440\u043E\u0432"),l(),r(4,"div",2)(5,"button",3),h("click",function(){return n.filterByCategoryName("all")}),a(6," \u0412\u0441\u0435 \u0442\u043E\u0432\u0430\u0440\u044B "),l(),q(7,Ye,2,3,"button",4),l()(),r(8,"div",5),q(9,Je,1,2,"app-product-card",6),l(),q(10,Xe,3,0,"div",7),l()),e&2&&(s(5),E("active",n.selectedCategory()==="all"),s(2),O("ngForOf",n.categories()),s(2),O("ngForOf",n.filteredProducts()),s(),O("ngIf",n.filteredProducts().length===0))},dependencies:[k,lt,te,Ot],styles:[".catalog-container[_ngcontent-%COMP%]{padding:40px 20px;max-width:1400px;margin:0 auto}.catalog-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px}.catalog-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;margin-bottom:30px;font-size:36px;font-family:Geometria,Montserrat,sans-serif;font-weight:600}.category-filter[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap;gap:10px;margin-bottom:20px}.category-btn[_ngcontent-%COMP%]{padding:10px 20px;border:2px solid #ff6b6b;background:#fff;color:#ff6b6b;border-radius:25px;cursor:pointer;font-size:16px;transition:all .3s;white-space:nowrap;font-family:Geometria,Montserrat,sans-serif;font-weight:500}.category-btn[_ngcontent-%COMP%]:hover, .category-btn.active[_ngcontent-%COMP%]{background:#ff6b6b;color:#fff}.products-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:30px;margin-top:30px}.no-products[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666;font-size:18px;font-family:Geometria,Montserrat,sans-serif}.no-products[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}@media(max-width:768px){.catalog-container[_ngcontent-%COMP%]{padding:20px 15px}.catalog-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;margin-bottom:20px}.category-btn[_ngcontent-%COMP%]{padding:8px 16px;font-size:14px}.products-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px}}"]})};var wt=class i{constructor(t,e){this.authService=t;this.router=e}logout(){confirm("\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0432\u044B\u0439\u0442\u0438 \u0438\u0437 \u043F\u0430\u043D\u0435\u043B\u0438 \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u0430?")&&(this.authService.logout(),this.router.navigate(["/"]))}static \u0275fac=function(e){return new(e||i)(x(Y),x(B))};static \u0275cmp=M({type:i,selectors:[["app-admin"]],decls:20,vars:0,consts:[[1,"admin-container"],[1,"admin-nav"],[1,"admin-nav-top"],[1,"admin-logo"],[1,"admin-nav-sections"],["routerLink","/admin/home","routerLinkActive","active"],["routerLink","/admin/catalog","routerLinkActive","active"],["routerLink","/admin/products","routerLinkActive","active"],["routerLink","/admin/shops","routerLinkActive","active"],["routerLink","/admin/contacts","routerLinkActive","active"],["routerLink","/",1,"nav-to-site"],[1,"admin-content"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"nav",1)(2,"div",2)(3,"h2",3),a(4,"ADMIN"),l()(),r(5,"div",4)(6,"a",5),a(7,"\u0413\u043B\u0430\u0432\u043D\u0430\u044F"),l(),r(8,"a",6),a(9,"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438"),l(),r(10,"a",7),a(11,"\u0422\u043E\u0432\u0430\u0440\u044B"),l(),r(12,"a",8),a(13,"\u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B"),l(),r(14,"a",9),a(15,"\u041A\u043E\u043D\u0442\u0430\u043A\u0442\u044B"),l(),r(16,"a",10),a(17,"\u2190 \u041D\u0430 \u0441\u0430\u0439\u0442"),l()()(),r(18,"div",11),b(19,"router-outlet"),l()())},dependencies:[k,mt,pt,gt,ut],styles:[".admin-container[_ngcontent-%COMP%]{display:flex;min-height:100vh;background:#f5f5f7}.admin-nav[_ngcontent-%COMP%]{width:250px;background:#1a1a2e;color:#fff;padding:15px 0;position:fixed;height:100vh;overflow-y:auto}.admin-logo[_ngcontent-%COMP%]{padding:0 20px 15px;margin:0 0 10px;color:#fff;font-size:24px;border-bottom:1px solid #2d2d4d}.admin-nav-sections[_ngcontent-%COMP%]{padding:0 20px;margin-top:5px}.nav-section-title[_ngcontent-%COMP%]{color:#a0a0c0;font-size:12px;text-transform:uppercase;letter-spacing:1px;margin:10px 0 8px;font-weight:600}.admin-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;color:#b0b0d0;text-decoration:none;padding:8px 15px;margin:4px 0;border-radius:6px;transition:all .3s ease;font-size:14px}.admin-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:#fff}.admin-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#007bff;color:#fff}.admin-content[_ngcontent-%COMP%]{flex:1;margin-left:250px;padding:30px;min-height:100vh}@media(max-width:768px){.admin-container[_ngcontent-%COMP%]{flex-direction:column}.admin-nav[_ngcontent-%COMP%]{width:100%;height:auto;position:relative;padding:15px}.admin-content[_ngcontent-%COMP%]{margin-left:0;padding:20px}.admin-nav-sections[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.admin-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:8px 12px}}.admin-nav-top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0 20px 20px}.btn-logout-small[_ngcontent-%COMP%]{background:none;border:none;color:#ffffffb3;font-size:20px;cursor:pointer;padding:5px;border-radius:4px}.btn-logout-small[_ngcontent-%COMP%]:hover{color:#ff6b6b;background:#ffffff1a}.nav-to-site[_ngcontent-%COMP%]{margin-top:20px;padding-top:15px;border-top:1px solid rgba(255,255,255,.1);color:#3498db}.nav-to-site[_ngcontent-%COMP%]:hover{color:#4dabf7}"]})};function Qe(i,t){if(i&1&&(r(0,"div",7),a(1),l()),i&2){let e=g();s(),v(e.errorMessage)}}var yt=class i{constructor(t,e){this.authService=t;this.router=e}username="";password="";errorMessage="";onSubmit(){this.authService.login(this.username,this.password)?this.router.navigate(["/admin"]):(this.errorMessage="\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043B\u043E\u0433\u0438\u043D \u0438\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C",this.password="")}static \u0275fac=function(e){return new(e||i)(x(Y),x(B))};static \u0275cmp=M({type:i,selectors:[["app-login"]],decls:13,vars:4,consts:[["loginForm","ngForm"],[1,"login-container"],[1,"login-card"],[3,"ngSubmit"],[1,"form-group"],["type","text","name","username","required","","placeholder","\u041B\u043E\u0433\u0438\u043D",3,"ngModelChange","ngModel"],["type","password","name","password","required","","placeholder","\u041F\u0430\u0440\u043E\u043B\u044C",3,"ngModelChange","ngModel"],[1,"error"],["type","submit",3,"disabled"]],template:function(e,n){if(e&1){let o=P();r(0,"div",1)(1,"div",2)(2,"h2"),a(3,"\u041F\u0430\u043D\u0435\u043B\u044C \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u0430"),l(),r(4,"form",3,0),h("ngSubmit",function(){return u(o),m(n.onSubmit())}),r(6,"div",4)(7,"input",5),Vt("ngModelChange",function(f){return u(o),Lt(n.username,f)||(n.username=f),m(f)}),l()(),r(8,"div",4)(9,"input",6),Vt("ngModelChange",function(f){return u(o),Lt(n.password,f)||(n.password=f),m(f)}),l()(),C(10,Qe,2,1,"div",7),r(11,"button",8),a(12," \u0412\u043E\u0439\u0442\u0438 "),l()()()()}if(e&2){let o=Xt(5);s(7),zt("ngModel",n.username),s(2),zt("ngModel",n.password),s(),_(n.errorMessage?10:-1),s(),O("disabled",!o.form.valid)}},dependencies:[k,K,ge,ht,ft,de,ue,Ct,pe],styles:[".login-container[_ngcontent-%COMP%]{min-height:80vh;display:flex;align-items:center;justify-content:center;padding:20px}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:30px;box-shadow:0 2px 10px #0000001a;width:100%;max-width:400px}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;margin-bottom:20px;text-align:center}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;font-size:16px}button[_ngcontent-%COMP%]{width:100%;padding:12px;background:#4dabf7;color:#fff;border:none;border-radius:4px;font-size:16px;cursor:pointer;margin-top:10px}button[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}.error[_ngcontent-%COMP%]{color:#ff6b6b;margin:10px 0;text-align:center}.demo-info[_ngcontent-%COMP%]{margin-top:20px;text-align:center;color:#666}"]})};var Et=class i{constructor(t,e){this.authService=t;this.router=e}canActivate(t,e){return this.authService.isAdmin()?!0:(this.router.navigate(["/login"]),!1)}static \u0275fac=function(e){return new(e||i)(X(Y),X(B))};static \u0275prov=Z({token:i,factory:i.\u0275fac,providedIn:"root"})};var J=class i{constructor(t){this.supabaseService=t;console.log("=== ShopsService \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u043D ==="),window.shopsService=this,window.shopsServiceDebug={getMode:()=>this.storageMode,testConnection:()=>this.testConnection(),testAll:()=>this.testAllOperations(),forceLoadFromSupabase:()=>this.forceLoadFromSupabase(),clearCache:()=>this.clearCache(),addTestShop:()=>this.addTestShopToSupabase()},this.initialize()}shopsSubject=new Ht([]);shops$=this.shopsSubject.asObservable();storageMode="local";storageKey="komfort_shops";isInitialized=!1;async initialize(){this.isInitialized||(this.storageMode=localStorage.getItem("komfort_storage_mode")||"supabase",console.log("\u{1F527} \u0420\u0435\u0436\u0438\u043C \u0440\u0430\u0431\u043E\u0442\u044B ShopsService:",this.storageMode),this.storageMode==="local"?this.loadFromLocalStorage():await this.loadFromSupabase(),this.isInitialized=!0,console.log("\u2705 ShopsService \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u043D. \u041C\u0430\u0433\u0430\u0437\u0438\u043D\u043E\u0432:",this.getShops().length))}getDefaultShops(){return[{id:"1",title:"\u0413\u043B\u0430\u0432\u043D\u044B\u0439 \u043C\u0430\u0433\u0430\u0437\u0438\u043D",address:"\u0433. \u041C\u043E\u0441\u043A\u0432\u0430, \u0443\u043B. \u041F\u0440\u0438\u043C\u0435\u0440\u043D\u0430\u044F, \u0434. 10",description:"\u041A\u0440\u0443\u043F\u043D\u0435\u0439\u0448\u0438\u0439 \u043C\u0430\u0433\u0430\u0437\u0438\u043D \u0441\u0435\u0442\u0438 \u0441 \u0448\u0438\u0440\u043E\u043A\u0438\u043C \u0430\u0441\u0441\u043E\u0440\u0442\u0438\u043C\u0435\u043D\u0442\u043E\u043C",imageUrl:"assets/shop1.jpg",phone:"+7 (495) 123-45-67",email:"main@komfort.ru",workingHours:"\u041F\u043D-\u0412\u0441: 9:00-21:00",coordinates:{lat:55.7558,lng:37.6176}},{id:"2",title:"\u0424\u0438\u043B\u0438\u0430\u043B \u043D\u0430 \u041B\u0435\u043D\u0438\u043D\u0430",address:"\u0433. \u041C\u043E\u0441\u043A\u0432\u0430, \u043F\u0440-\u0442 \u041B\u0435\u043D\u0438\u043D\u0430, \u0434. 25",description:"\u041C\u0430\u0433\u0430\u0437\u0438\u043D \u0432 \u0446\u0435\u043D\u0442\u0440\u0435 \u0433\u043E\u0440\u043E\u0434\u0430 \u0441 \u0434\u0435\u043C\u043E\u043D\u0441\u0442\u0440\u0430\u0446\u0438\u043E\u043D\u043D\u044B\u043C \u0437\u0430\u043B\u043E\u043C",imageUrl:"assets/shop2.jpg",phone:"+7 (495) 234-56-78",email:"lenina@komfort.ru",workingHours:"\u041F\u043D-\u0421\u0431: 10:00-20:00, \u0412\u0441: 11:00-19:00",coordinates:{lat:55.7547,lng:37.6206}}]}loadFromLocalStorage(){let t=localStorage.getItem(this.storageKey);if(t)try{let e=JSON.parse(t);this.shopsSubject.next(e),console.log("\u{1F4E6} \u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u044B \u0438\u0437 localStorage:",e.length)}catch(e){console.error("\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u043E\u0432 \u0438\u0437 localStorage:",e);let n=this.getDefaultShops();this.shopsSubject.next(n),this.saveToLocalStorage(n)}else{console.log("\u{1F4ED} \u041D\u0435\u0442 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043D\u044B\u0445 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u043E\u0432, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u044E\u0442\u0441\u044F \u043D\u0430\u0447\u0430\u043B\u044C\u043D\u044B\u0435");let e=this.getDefaultShops();this.shopsSubject.next(e),this.saveToLocalStorage(e)}}async loadFromSupabase(){console.log("\u{1F504} \u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u043E\u0432 \u0438\u0437 Supabase...");try{if(!await this.testConnection()){console.warn("\u26A0\uFE0F \u041D\u0435\u0442 \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u044F \u043A Supabase, \u043F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0430\u0435\u043C\u0441\u044F \u043D\u0430 localStorage"),this.storageMode="local",this.loadFromLocalStorage();return}let e=await this.supabaseService.getShops();if(e&&e.length>0)console.log("\u2705 \u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u044B \u0438\u0437 Supabase:",e.length),this.shopsSubject.next(e),this.saveToLocalStorage(e),e.slice(0,2).forEach((n,o)=>{console.log(`  ${o+1}. ${n.title} (${n.address})`)});else{console.log("\u{1F4ED} Supabase \u043F\u0443\u0441\u0442, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u043C \u043B\u043E\u043A\u0430\u043B\u044C\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435");let n=this.getDefaultShops();this.shopsSubject.next(n),this.saveToLocalStorage(n)}}catch(t){console.error("\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0438\u0437 Supabase:",t),console.log("\u{1F504} \u041F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0430\u0435\u043C\u0441\u044F \u043D\u0430 LocalStorage"),this.storageMode="local",this.loadFromLocalStorage()}}saveToLocalStorage(t){let e=t||this.getShops();try{localStorage.setItem(this.storageKey,JSON.stringify(e)),console.log("\u{1F4BE} \u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B \u0432 localStorage (\u043A\u044D\u0448):",e.length)}catch(n){console.error("\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0432 localStorage:",n)}}getShops(){return this.shopsSubject.getValue()}async addShop(t){console.log("\u2795 \u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430 \u0432 \u0440\u0435\u0436\u0438\u043C\u0435:",this.storageMode);let e=G(z({},t),{id:this.generateId()});if(this.storageMode==="local"){let o=[...this.getShops(),e];return this.shopsSubject.next(o),this.saveToLocalStorage(o),console.log("\u2705 \u041C\u0430\u0433\u0430\u0437\u0438\u043D \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 LocalStorage:",e.title),e}else try{let n=await this.supabaseService.addShop(e);if(n){let c=[...this.getShops(),n];return this.shopsSubject.next(c),this.saveToLocalStorage(c),console.log("\u2705 \u041C\u0430\u0433\u0430\u0437\u0438\u043D \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 Supabase:",n.title),n}else throw new Error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0432 Supabase")}catch(n){return console.error("\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0432 Supabase:",n),console.log("\u{1F504} \u041F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0430\u0435\u043C\u0441\u044F \u0432 \u043B\u043E\u043A\u0430\u043B\u044C\u043D\u044B\u0439 \u0440\u0435\u0436\u0438\u043C"),this.storageMode="local",this.addShop(t)}}async updateShop(t,e){console.log("\u270F\uFE0F \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430 ID:",t,"\u0432 \u0440\u0435\u0436\u0438\u043C\u0435:",this.storageMode);let n=this.getShops(),o=n.findIndex(y=>y.id===t);if(o===-1)return console.error(`\u274C \u041C\u0430\u0433\u0430\u0437\u0438\u043D \u0441 id ${t} \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D`),null;let c=z(z({},n[o]),e),f=[...n];if(f[o]=c,this.shopsSubject.next(f),this.storageMode==="local")this.saveToLocalStorage(f),console.log("\u2705 \u041C\u0430\u0433\u0430\u0437\u0438\u043D \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D \u0432 LocalStorage");else try{await this.supabaseService.updateShop(t,e)?(this.saveToLocalStorage(f),console.log("\u2705 \u041C\u0430\u0433\u0430\u0437\u0438\u043D \u0441\u0438\u043D\u0445\u0440\u043E\u043D\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u043D \u0441 Supabase")):console.warn("\u26A0\uFE0F \u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u0438\u043D\u0445\u0440\u043E\u043D\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441 Supabase")}catch(y){console.error("\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0438\u043D\u0445\u0440\u043E\u043D\u0438\u0437\u0430\u0446\u0438\u0438 \u0441 Supabase:",y)}return c}async uploadShopImage(t){try{console.log("\u{1F4E4} [ShopsService] \u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430...");let e=t.name.split(".").pop()?.toLowerCase()||"jpg",o=`shops/${`${Date.now()}_${Math.random().toString(36).substring(7)}.${e}`}`;console.log("\u{1F4C1} \u0424\u0430\u0439\u043B:",t.name),console.log("\u{1F4C2} \u041F\u0443\u0442\u044C \u0432 Storage:",o),console.log("\u{1F4CF} \u0420\u0430\u0437\u043C\u0435\u0440:",(t.size/1024/1024).toFixed(2),"MB");let c=this.supabaseService.getClient(),{data:f,error:y}=await c.storage.from("shop-images").upload(o,t,{cacheControl:"3600",upsert:!1,contentType:t.type});if(y)throw console.error("\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438:",y),y;console.log("\u2705 \u0424\u0430\u0439\u043B \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D \u0432 Supabase:",f);let{data:Ut}=c.storage.from("shop-images").getPublicUrl(o),Q=Ut.publicUrl;return console.log("\u{1F517} \u041F\u0443\u0431\u043B\u0438\u0447\u043D\u044B\u0439 URL:",Q),Q}catch(e){throw console.error("\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u0432 uploadShopImage:",e),e}}getPublicUrl(t,e){let{data:n}=t.storage.from("shop-images").getPublicUrl(e),o=n.publicUrl;return console.log("\u{1F517} \u041F\u0443\u0431\u043B\u0438\u0447\u043D\u044B\u0439 URL:",o),o}async uploadShopImages(t){if(console.log(`\u{1F4E4} [ShopsService] \u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 ${t.length} \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0439 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430...`),this.storageMode!=="supabase")return console.warn("\u26A0\uFE0F \u0420\u0435\u0436\u0438\u043C \u043D\u0435 Supabase, \u0432\u043E\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043C \u043B\u043E\u043A\u0430\u043B\u044C\u043D\u044B\u0435 URL"),t.map(e=>URL.createObjectURL(e));try{let e=t.map(o=>this.uploadShopImage(o)),n=await Promise.all(e);return console.log("\u2705 \u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u044B:",n),n}catch(e){throw console.error("\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0439:",e),e}}isSupabaseStorageUrl(t){return t.includes("supabase.co/storage")||t.includes("/storage/v1/object/public/")}extractFileNameFromUrl(t){try{let n=new URL(t).pathname.split("/");return n[n.length-1]}catch{return t}}async deleteShop(t){console.log("\u{1F5D1}\uFE0F \u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430 ID:",t,"\u0432 \u0440\u0435\u0436\u0438\u043C\u0435:",this.storageMode);let e=this.getShops();if(!e.some(c=>c.id===t))return console.error(`\u274C \u041C\u0430\u0433\u0430\u0437\u0438\u043D \u0441 id ${t} \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D`),!1;let o=e.filter(c=>c.id!==t);if(this.shopsSubject.next(o),this.storageMode==="local")return this.saveToLocalStorage(o),console.log("\u2705 \u041C\u0430\u0433\u0430\u0437\u0438\u043D \u0443\u0434\u0430\u043B\u0435\u043D \u0438\u0437 LocalStorage"),!0;try{return await this.supabaseService.deleteShop(t)?(this.saveToLocalStorage(o),console.log("\u2705 \u041C\u0430\u0433\u0430\u0437\u0438\u043D \u0443\u0434\u0430\u043B\u0435\u043D \u0438\u0437 Supabase"),!0):(console.warn("\u26A0\uFE0F \u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0438\u0437 Supabase"),!1)}catch(c){return console.error("\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F \u0438\u0437 Supabase:",c),!1}}saveShops(t){console.log("\u{1F4BE} \u0420\u0443\u0447\u043D\u043E\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u043E\u0432:",t.length),this.shopsSubject.next(t),this.saveToLocalStorage(t)}generateId(){let t=this.getShops();if(t.length===0)return"1";let e=t.map(n=>{let o=parseInt(n.id);return isNaN(o)?0:o}).filter(n=>n>0);return e.length>0?(Math.max(...e)+1).toString():(t.length+1).toString()}getShopById(t){return this.getShops().find(e=>e.id===t)}getStorageMode(){return this.storageMode}async switchStorageMode(t){if(this.storageMode===t){console.log(`\u2139\uFE0F \u0423\u0436\u0435 \u0432 \u0440\u0435\u0436\u0438\u043C\u0435 ${t}`);return}console.log(`\u{1F504} \u041F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0435 \u0440\u0435\u0436\u0438\u043C\u0430 \u0441 ${this.storageMode} \u043D\u0430 ${t}`),this.storageMode=t,localStorage.setItem("komfort_storage_mode",t),t==="local"?this.loadFromLocalStorage():await this.loadFromSupabase()}async syncToSupabase(){console.log("\u{1F504} \u0421\u0438\u043D\u0445\u0440\u043E\u043D\u0438\u0437\u0430\u0446\u0438\u044F \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u043E\u0432 \u0441 Supabase...");let t=this.getShops(),e=0;for(let n of t)try{await this.supabaseService.addShop(n)&&(e++,console.log(`  \u2705 ${n.title}`))}catch(o){console.error(`  \u274C ${n.title}:`,o.message||o)}console.log(`\u{1F4CA} \u0421\u0438\u043D\u0445\u0440\u043E\u043D\u0438\u0437\u0430\u0446\u0438\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430: ${e}/${t.length} \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u043E\u0432`)}async testConnection(){console.log("\u{1F50C} \u0422\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u044F \u043A Supabase...");try{let t=await this.supabaseService.getShops();return console.log("\u2705 \u041F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0435 \u043A Supabase \u0443\u0441\u043F\u0435\u0448\u043D\u043E"),!0}catch(t){return console.error("\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u044F:",t.message||t),!1}}async testAllOperations(){if(console.log("\u{1F9EA} \u0417\u0430\u043F\u0443\u0441\u043A \u0432\u0441\u0435\u0445 \u0442\u0435\u0441\u0442\u043E\u0432\u044B\u0445 \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0439..."),!await this.testConnection()){console.log("\u274C \u0422\u0435\u0441\u0442 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D: \u043D\u0435\u0442 \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u044F");return}console.log("\u{1F4E6} \u041F\u043E\u043B\u0443\u0447\u0430\u0435\u043C \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u044B...");let e=this.getShops();console.log(`   \u041D\u0430\u0439\u0434\u0435\u043D\u043E: ${e.length} \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u043E\u0432`),console.log("\u2795 \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u0442\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u043C\u0430\u0433\u0430\u0437\u0438\u043D...");let n={title:`\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u043C\u0430\u0433\u0430\u0437\u0438\u043D ${Date.now()}`,address:"\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0430\u0434\u0440\u0435\u0441",description:"\u041C\u0430\u0433\u0430\u0437\u0438\u043D \u0434\u043B\u044F \u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F",imageUrl:"assets/default-shop.jpg",phone:"+7999"+Math.floor(Math.random()*1e6),email:"test@example.com",workingHours:"\u041F\u043D-\u041F\u0442: 9:00-18:00",coordinates:{lat:55.75,lng:37.61}},o=await this.addShop(n);if(console.log(`   \u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D: ${o?.title}`),e.length>0){console.log("\u270F\uFE0F \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u043F\u0435\u0440\u0432\u044B\u0439 \u043C\u0430\u0433\u0430\u0437\u0438\u043D...");let c=await this.updateShop(e[0].id,{title:e[0].title+" [\u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E]"});console.log(`   \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D: ${c?.title}`)}console.log("\u2705 \u0412\u0441\u0435 \u0442\u0435\u0441\u0442\u044B \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u044B")}async forceLoadFromSupabase(){console.log("\u{1F504} \u041F\u0440\u0438\u043D\u0443\u0434\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0438\u0437 Supabase..."),await this.loadFromSupabase()}clearCache(){console.log("\u{1F9F9} \u041E\u0447\u0438\u0441\u0442\u043A\u0430 \u043A\u044D\u0448\u0430 localStorage..."),localStorage.removeItem(this.storageKey);let t=this.getDefaultShops();this.shopsSubject.next(t),this.saveToLocalStorage(t)}async addTestShopToSupabase(){console.log("\u2795 \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u0442\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u043C\u0430\u0433\u0430\u0437\u0438\u043D \u0432 Supabase \u043D\u0430\u043F\u0440\u044F\u043C\u0443\u044E...");let t={title:`\u0422\u0435\u0441\u0442 \u0438\u0437 \u043A\u043E\u043D\u0441\u043E\u043B\u0438 ${Date.now()}`,address:"\u0433. \u041C\u043E\u0441\u043A\u0432\u0430, \u0442\u0435\u0441\u0442\u043E\u0432\u0430\u044F \u0443\u043B\u0438\u0446\u0430, \u0434. 1",description:"\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u043C\u0430\u0433\u0430\u0437\u0438\u043D \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043D\u044B\u0439 \u0447\u0435\u0440\u0435\u0437 \u043A\u043E\u043D\u0441\u043E\u043B\u044C",imageUrl:"assets/default-shop.jpg",phone:"+7999"+Math.floor(Math.random()*1e6),email:"console@test.ru",workingHours:"\u041F\u043D-\u0412\u0441: 10:00-20:00"};try{let e=await this.supabaseService.addShop(t);if(e){console.log("\u2705 \u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u043C\u0430\u0433\u0430\u0437\u0438\u043D \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 Supabase:",e.title);let o=[...this.getShops(),e];this.shopsSubject.next(o),this.saveToLocalStorage(o)}else console.log("\u274C \u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D \u0432 Supabase")}catch(e){console.error("\u274C \u041E\u0448\u0438\u0431\u043A\u0430:",e)}}getShopsFromApi(){return this.shops$}static \u0275fac=function(e){return new(e||i)(X(et))};static \u0275prov=Z({token:i,factory:i.\u0275fac,providedIn:"root"})};var tn=(i,t)=>t.id;function en(i,t){if(i&1&&(d(0,"div",9),w(),d(1,"svg",10),A(2,"path",16),p(),U(),d(3,"a",17),a(4),p()()),i&2){let e=g().$implicit;s(3),V("href","tel:"+e.phone,I),s(),v(e.phone)}}function nn(i,t){if(i&1&&(d(0,"div",9),w(),d(1,"svg",10),A(2,"path",18),p(),U(),d(3,"span"),a(4),p()()),i&2){let e=g().$implicit;s(4),v(e.workingHours)}}function on(i,t){if(i&1&&(d(0,"div",3)(1,"div",5),A(2,"img",6),p(),d(3,"div",7)(4,"h3"),a(5),p(),d(6,"div",8)(7,"div",9),w(),d(8,"svg",10),A(9,"path",11),p(),U(),d(10,"span",12),a(11),p()(),C(12,en,5,2,"div",9),C(13,nn,5,1,"div",9),p(),d(14,"p",13),a(15),p(),d(16,"div",14)(17,"a",15),w(),d(18,"svg",10),A(19,"path",11),p(),a(20," \u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0432 \u042F\u043D\u0434\u0435\u043A\u0441 \u041A\u0430\u0440\u0442\u0430\u0445 "),p()()()()),i&2){let e=t.$implicit,n=g();s(2),V("src",e.imageUrl,I)("alt",e.title),s(3),v(e.title),s(6),v(e.address),s(),_(e.phone?12:-1),s(),_(e.workingHours?13:-1),s(2),v(e.description),s(2),V("href",n.getYandexMapsUrl(e.address),I)}}function an(i,t){i&1&&(d(0,"div",4)(1,"p"),a(2,"\u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B \u0432\u0440\u0435\u043C\u0435\u043D\u043D\u043E \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0442"),p()())}var kt=class i{constructor(t,e,n){this.shopsService=t;this.titleService=e;this.metaService=n}shops=[];shopsSubscription;ngOnInit(){console.log("\u{1F3EA} ShopsComponent \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u043D"),this.shopsSubscription=this.shopsService.shops$.subscribe({next:t=>{this.shops=t,console.log("\u{1F4E6} \u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u044B:",t.length)},error:t=>{console.error("\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u043E\u0432:",t)}}),this.loadShops(),this.titleService.setTitle("\u0422\u043E\u0440\u0433\u043E\u0432\u044B\u0439 \u0434\u043E\u043C KOMFORT - \u0413\u043B\u0430\u0432\u043D\u0430\u044F | \u041C\u0435\u0431\u0435\u043B\u044C \u0434\u043B\u044F \u0434\u043E\u043C\u0430"),this.metaService.updateTag({name:"description",content:"\u0422\u043E\u0440\u0433\u043E\u0432\u044B\u0439 \u0434\u043E\u043C KOMFORT - \u043B\u0443\u0447\u0448\u0430\u044F \u043C\u0435\u0431\u0435\u043B\u044C \u0434\u043B\u044F \u0432\u0430\u0448\u0435\u0433\u043E \u0434\u043E\u043C\u0430. \u0414\u0438\u0432\u0430\u043D\u044B, \u043A\u0440\u043E\u0432\u0430\u0442\u0438, \u043C\u0430\u0442\u0440\u0430\u0441\u044B, \u043A\u0443\u0445\u043D\u0438. \u0413\u0430\u0440\u0430\u043D\u0442\u0438\u044F \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0430."}),this.metaService.updateTag({name:"keywords",content:"KOMFORT, \u043C\u0435\u0431\u0435\u043B\u044C, \u0434\u0438\u0432\u0430\u043D\u044B, \u043A\u0440\u043E\u0432\u0430\u0442\u0438, \u043C\u0430\u0442\u0440\u0430\u0441\u044B, \u043A\u0443\u0445\u043D\u0438, \u0433\u043E\u0441\u0442\u0438\u043D\u044B\u0435, \u0441\u043F\u0430\u043B\u044C\u043D\u0438"})}ngOnDestroy(){this.shopsSubscription&&(this.shopsSubscription.unsubscribe(),console.log("\u{1F50C} \u041E\u0442\u043F\u0438\u0441\u0430\u043B\u0438\u0441\u044C \u043E\u0442 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0439 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u043E\u0432"))}loadShops(){this.shops=this.shopsService.getShops(),console.log("\u{1F504} \u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u043E\u0432:",this.shops.length)}getYandexMapsUrl(t){return`https://yandex.ru/maps/?text=${encodeURIComponent(t)}`}getYandexNavigatorUrl(t){return`yandexnavi://build_route_on_map?lat_to=55.753215&lon_to=37.622504&text=${encodeURIComponent(t)}`}getGoogleMapsUrl(t){return`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t)}`}getStorageMode(){return this.shopsService.getStorageMode()==="local"?"\u043B\u043E\u043A\u0430\u043B\u044C\u043D\u044B\u0439":"supabase"}refreshShops(){let t=this.shopsService.getStorageMode();console.log(`\u{1F504} \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u044B (\u0440\u0435\u0436\u0438\u043C: ${t})...`),t==="supabase"?this.shopsService.forceLoadFromSupabase():this.loadShops()}static \u0275fac=function(e){return new(e||i)(x(J),x(R),x(H))};static \u0275cmp=M({type:i,selectors:[["app-shops"]],decls:10,vars:1,consts:[[1,"shops-page"],[1,"shops-header"],[1,"shops-container"],[1,"shop-card"],[1,"no-shops"],[1,"shop-image"],[3,"src","alt"],[1,"shop-content"],[1,"shop-info"],[1,"info-item"],["viewBox","0 0 24 24",1,"icon"],["d","M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"],[1,"address"],[1,"shop-description"],[1,"shop-actions"],["target","_blank",1,"map-btn",3,"href"],["d","M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"],[3,"href"],["d","M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"]],template:function(e,n){e&1&&(d(0,"div",0)(1,"div",1)(2,"h1"),a(3,"\u041D\u0430\u0448\u0438 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u044B"),p(),d(4,"p"),a(5,"\u041F\u043E\u0441\u0435\u0442\u0438\u0442\u0435 \u043D\u0430\u0448\u0438 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u044B, \u0447\u0442\u043E\u0431\u044B \u0443\u0432\u0438\u0434\u0435\u0442\u044C \u043F\u0440\u043E\u0434\u0443\u043A\u0446\u0438\u044E \u0432\u0436\u0438\u0432\u0443\u044E \u0438 \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043A\u043E\u043D\u0441\u0443\u043B\u044C\u0442\u0430\u0446\u0438\u044E \u0441\u043F\u0435\u0446\u0438\u0430\u043B\u0438\u0441\u0442\u043E\u0432"),p()(),d(6,"div",2),F(7,on,21,8,"div",3,tn),p(),C(9,an,3,0,"div",4),p()),e&2&&(s(7),D(n.shops),s(2),_(n.shops.length===0?9:-1))},dependencies:[k],styles:['@charset "UTF-8";.shops-page[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:40px 20px}.shops-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:50px}.shops-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:15px}.shops-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1.1rem;max-width:600px;margin:0 auto}.shops-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:30px}.shop-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 5px 15px #0000001a;transition:transform .3s ease,box-shadow .3s ease;display:flex;flex-direction:column;height:100%}.shop-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 25px #00000026}.shop-image[_ngcontent-%COMP%]{height:200px;overflow:hidden;flex-shrink:0}.shop-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .5s ease}.shop-card[_ngcontent-%COMP%]:hover   .shop-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}.shop-content[_ngcontent-%COMP%]{padding:25px;display:flex;flex-direction:column;flex-grow:1}.shop-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin-bottom:15px;font-weight:600}.shop-info[_ngcontent-%COMP%]{margin-bottom:20px}.info-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;margin-bottom:10px;color:#555}.info-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px;fill:#007bff;margin-right:10px;flex-shrink:0;margin-top:2px}.info-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}.info-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.shop-description[_ngcontent-%COMP%]{color:#666;line-height:1.6;margin-bottom:20px;flex-grow:1}.shop-actions[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap;margin-top:auto}.shop-actions[_ngcontent-%COMP%]   .map-btn[_ngcontent-%COMP%]{padding:12px 20px;border-radius:8px;text-decoration:none;font-weight:500;display:inline-flex;align-items:center;justify-content:center;transition:all .3s ease;background:#fc3f1d;color:#fff;width:100%;text-align:center;font-size:.95rem;border:none;cursor:pointer;background:linear-gradient(135deg,#fb6045,#f84242);box-shadow:0 4px 8px #fc3f1d4d}.shop-actions[_ngcontent-%COMP%]   .map-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px;fill:#fff;margin-right:10px;flex-shrink:0}.shop-actions[_ngcontent-%COMP%]   .map-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e6391a,#e62e2e);box-shadow:0 6px 12px #fc3f1d66;transform:translateY(-2px)}.shop-actions[_ngcontent-%COMP%]   .map-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 4px #fc3f1d4d}.no-shops[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666;font-size:1.2rem}@media(max-width:768px){.shops-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.shops-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.shop-card[_ngcontent-%COMP%]{max-width:100%}.shop-actions[_ngcontent-%COMP%]   .map-btn[_ngcontent-%COMP%]{width:100%;padding:14px 20px}}']})};var It=class i{constructor(t){this.http=t}uploadFile(t){let e=new FormData;return e.append("image",t),this.http.post("/api/upload",e)}deleteFile(t){return this.http.delete(`/api/upload/${t}`)}uploadShopImage(t){return new Bt(e=>{let n=new FileReader;n.onload=()=>{let o=n.result,c="shop_image_"+Date.now();localStorage.setItem(c,o),e.next({url:o}),e.complete()},n.onerror=o=>{e.error(o)},n.readAsDataURL(t)})}convertFileToBase64(t){return new Promise((e,n)=>{let o=new FileReader;o.readAsDataURL(t),o.onload=()=>e(o.result),o.onerror=c=>n(c)})}static \u0275fac=function(e){return new(e||i)(X(dt))};static \u0275prov=Z({token:i,factory:i.\u0275fac,providedIn:"root"})};var sn=["fileInput"],cn=(i,t)=>t.id;function ln(i,t){if(i&1){let e=P();r(0,"div",15),b(1,"img",31),r(2,"button",32),h("click",function(){u(e);let o=g(2);return m(o.removeImage())}),a(3," \xD7 "),l()()}if(i&2){let e=g(2);s(),O("src",e.imagePreview,I)}}function dn(i,t){if(i&1){let e=P();r(0,"div",6)(1,"h2"),a(2),l(),r(3,"input",8,0),h("change",function(o){u(e);let c=g();return m(c.onFileSelected(o))}),l(),r(5,"div",9)(6,"div",10)(7,"label"),a(8,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430 *"),l(),r(9,"input",11),h("ngModelChange",function(o){u(e);let c=g();return m(c.editingShop?c.editingShop.title=o:c.newShop.title=o)}),l()(),r(10,"div",10)(11,"label"),a(12,"\u0410\u0434\u0440\u0435\u0441 *"),l(),r(13,"input",12),h("ngModelChange",function(o){u(e);let c=g();return m(c.editingShop?c.editingShop.address=o:c.newShop.address=o)}),l()(),r(14,"div",13)(15,"label"),a(16,"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430"),l(),r(17,"div",14),C(18,ln,4,1,"div",15),r(19,"div",16),h("click",function(){u(e);let o=g();return m(o.triggerFileInput())}),w(),r(20,"svg",17),b(21,"path",18),l(),U(),r(22,"div",19)(23,"p",20),a(24),l(),r(25,"p",21),a(26),l()()(),r(27,"div",22)(28,"p"),a(29,"\u0418\u043B\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 URL \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F:"),l(),r(30,"input",23),h("ngModelChange",function(o){u(e);let c=g();return m(c.editingShop?c.editingShop.imageUrl=o:c.newShop.imageUrl=o)}),l()()()(),r(31,"div",10)(32,"label"),a(33,"\u0422\u0435\u043B\u0435\u0444\u043E\u043D"),l(),r(34,"input",24),h("ngModelChange",function(o){u(e);let c=g();return m(c.editingShop?c.editingShop.phone=o:c.newShop.phone=o)}),l()(),r(35,"div",10)(36,"label"),a(37,"Email"),l(),r(38,"input",25),h("ngModelChange",function(o){u(e);let c=g();return m(c.editingShop?c.editingShop.email=o:c.newShop.email=o)}),l()(),r(39,"div",10)(40,"label"),a(41,"\u0420\u0435\u0436\u0438\u043C \u0440\u0430\u0431\u043E\u0442\u044B"),l(),r(42,"input",26),h("ngModelChange",function(o){u(e);let c=g();return m(c.editingShop?c.editingShop.workingHours=o:c.newShop.workingHours=o)}),l()(),r(43,"div",13)(44,"label"),a(45,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 *"),l(),r(46,"textarea",27),h("ngModelChange",function(o){u(e);let c=g();return m(c.editingShop?c.editingShop.description=o:c.newShop.description=o)}),l()()(),r(47,"div",28)(48,"button",29),h("click",function(){u(e);let o=g();return m(o.saveShop())}),a(49),l(),r(50,"button",30),h("click",function(){u(e);let o=g();return m(o.cancelEdit())}),a(51," \u041E\u0442\u043C\u0435\u043D\u0430 "),l()()()}if(i&2){let e=g();s(2),T("",e.editingShop?"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435":"\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435"," \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430"),s(7),O("ngModel",e.editingShop?e.editingShop.title:e.newShop.title),s(4),O("ngModel",e.editingShop?e.editingShop.address:e.newShop.address),s(5),_(e.imagePreview?18:-1),s(),E("has-file",e.selectedFileName),s(5),T(" ",e.selectedFileName||"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435"," "),s(2),T(" ",e.selectedFileName?"\u0424\u0430\u0439\u043B: "+e.selectedFileName:"\u041F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0444\u0430\u0439\u043B \u0438\u043B\u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u0434\u043B\u044F \u0432\u044B\u0431\u043E\u0440\u0430 (PNG, JPG, max 5MB)"," "),s(4),O("ngModel",e.editingShop?e.editingShop.imageUrl:e.newShop.imageUrl),s(4),O("ngModel",e.editingShop?e.editingShop.phone:e.newShop.phone),s(4),O("ngModel",e.editingShop?e.editingShop.email:e.newShop.email),s(4),O("ngModel",e.editingShop?e.editingShop.workingHours:e.newShop.workingHours),s(4),O("ngModel",e.editingShop?e.editingShop.description:e.newShop.description),s(2),E("loading",e.isUploading),O("disabled",!e.validateForm()||e.isUploading),s(),T(" ",e.isUploading?"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430...":"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"," "),s(),O("disabled",e.isUploading)}}function pn(i,t){if(i&1&&(r(0,"span"),a(1),l()),i&2){let e=g().$implicit;s(),T("\u{1F4DE} ",e.phone)}}function gn(i,t){if(i&1&&(r(0,"span"),a(1),l()),i&2){let e=g().$implicit;s(),T("\u{1F550} ",e.workingHours)}}function un(i,t){if(i&1){let e=P();r(0,"div",33)(1,"div",35),b(2,"img",36),r(3,"div",37)(4,"h3"),a(5),l(),r(6,"p",38),a(7),l(),r(8,"p",39),a(9),l(),r(10,"div",40),C(11,pn,2,1,"span"),C(12,gn,2,1,"span"),l()()(),r(13,"div",41)(14,"button",42),h("click",function(){let o=u(e).$implicit,c=g(2);return m(c.startEditShop(o))}),w(),r(15,"svg",4),b(16,"path",43),l(),a(17," \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C "),l(),U(),r(18,"button",44),h("click",function(){let o=u(e).$implicit,c=g(2);return m(c.deleteShop(o.id))}),w(),r(19,"svg",4),b(20,"path",45),l(),a(21," \u0423\u0434\u0430\u043B\u0438\u0442\u044C "),l()()()}if(i&2){let e=t.$implicit,n=g(2);s(2),O("src",e.imageUrl||"/assets/default-shop.jpg",I)("alt",e.title),s(3),v(e.title),s(2),v(e.address),s(2),v(n.truncateText(e.description,100)),s(2),_(e.phone?11:-1),s(),_(e.workingHours?12:-1)}}function mn(i,t){i&1&&(r(0,"div",34)(1,"p"),a(2,'\u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B \u043D\u0435 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u044B. \u041D\u0430\u0436\u043C\u0438\u0442\u0435 "\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D" \u0447\u0442\u043E\u0431\u044B \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u044B\u0439.'),l()())}function hn(i,t){if(i&1&&(r(0,"div",7),F(1,un,22,7,"div",33,cn),C(3,mn,3,0,"div",34),l()),i&2){let e=g();s(),D(e.shops),s(2),_(e.shops.length===0?3:-1)}}var Tt=class i{constructor(t,e,n,o){this.shopsService=t;this.fileUploadService=e;this.cdr=n;this.supabaseService=o}fileInput;shops=[];editingShop=null;isEditing=!1;isUploading=!1;imagePreview=null;selectedFileName="";newShop={title:"",address:"",description:"",imageUrl:"",phone:"",email:"",workingHours:""};ngOnInit(){this.loadShops()}loadShops(){this.shops=this.shopsService.getShops(),this.cdr.detectChanges()}startAddShop(){this.isEditing=!0,this.editingShop=null,this.imagePreview=null,this.selectedFileName="",this.newShop={title:"",address:"",description:"",imageUrl:"",phone:"",email:"",workingHours:""},this.cdr.detectChanges()}startEditShop(t){this.isEditing=!0,this.editingShop=z({},t),this.imagePreview=t.imageUrl||"assets/default-shop.jpg",this.selectedFileName="",this.cdr.detectChanges()}onFileSelected(t){let e=t.target;if(e.files&&e.files[0]){let n=e.files[0];if(this.selectedFileName=n.name,n.size>5*1024*1024){alert("\u0424\u0430\u0439\u043B \u0441\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0439. \u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 \u0440\u0430\u0437\u043C\u0435\u0440: 5MB"),e.value="";return}if(!["image/jpeg","image/png","image/gif","image/webp"].includes(n.type)){alert("\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043B \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F (JPEG, PNG, GIF, WebP)"),e.value="";return}this.fileUploadService.convertFileToBase64(n).then(c=>{this.imagePreview=c,this.editingShop?this.newShop.imageFile=n:this.newShop.imageFile=n,this.cdr.detectChanges()}).catch(c=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0447\u0442\u0435\u043D\u0438\u0438 \u0444\u0430\u0439\u043B\u0430:",c),alert("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u0440\u043E\u0447\u0438\u0442\u0430\u0442\u044C \u0444\u0430\u0439\u043B")})}}triggerFileInput(){this.fileInput.nativeElement.click()}removeImage(){this.imagePreview=null,this.selectedFileName="",this.editingShop?this.editingShop.imageUrl="":(this.newShop.imageUrl="",this.newShop.imageFile=void 0),this.fileInput&&(this.fileInput.nativeElement.value=""),this.cdr.detectChanges()}async saveShop(){console.log("\u{1F504} \u041D\u0430\u0447\u0430\u043B\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430");try{this.isUploading=!0,this.cdr.detectChanges();let t="";if(this.newShop.imageFile){console.log("\u{1F4E4} \u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0444\u0430\u0439\u043B\u0430 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u0432 Supabase Storage...");try{t=await this.shopsService.uploadShopImages([this.newShop.imageFile]).then(n=>n[0]),console.log("\u2705 \u0424\u0430\u0439\u043B \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D \u0432 Supabase Storage:",t)}catch(n){throw console.error("\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0444\u0430\u0439\u043B\u0430 \u0432 Supabase:",n),n.message.includes("bucket")||n.message.includes("policy")?this.showNotification("error",`\u041E\u0448\u0438\u0431\u043A\u0430 \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 Storage. \u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435:
1. \u0421\u043E\u0437\u0434\u0430\u043D \u043B\u0438 bucket "shop-images" \u0432 Supabase Dashboard
2. \u0412\u043A\u043B\u044E\u0447\u0435\u043D \u043B\u0438 \u0440\u0435\u0436\u0438\u043C "Public"
3. \u041E\u0442\u043A\u043B\u044E\u0447\u0435\u043D\u044B \u043B\u0438 RLS \u043F\u043E\u043B\u0438\u0442\u0438\u043A\u0438 (\u0438\u043B\u0438 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043D\u044B \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E)`):this.showNotification("error",`\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435: ${n.message}`),n}}else if(this.editingShop?.imageUrl&&this.editingShop.imageUrl.startsWith("data:image")){console.log("\u{1F504} \u041A\u043E\u043D\u0432\u0435\u0440\u0442\u0430\u0446\u0438\u044F Base64 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430...");try{let n=`${this.editingShop.title||"shop"}-${Date.now()}.jpg`,o=this.base64ToFile(this.editingShop.imageUrl,n);t=await this.uploadFileToSupabase(o,"shop-images","shops"),console.log("\u2705 Base64 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E \u0432 Supabase:",t)}catch(n){console.error("\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u043A\u043E\u043D\u0432\u0435\u0440\u0442\u0430\u0446\u0438\u0438 Base64:",n),t="/assets/default-shop.jpg",console.log("\u{1F3F7}\uFE0F \u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u043C \u0434\u0435\u0444\u043E\u043B\u0442\u043D\u043E\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435")}}else this.editingShop?.imageUrl?(t=this.editingShop.imageUrl,console.log("\u{1F5BC}\uFE0F \u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u043C \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0435\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435:",t)):this.newShop.imageUrl?(t=this.newShop.imageUrl,console.log("\u{1F517} \u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u043C URL \u0438\u0437 \u043F\u043E\u043B\u044F:",t)):(t="/assets/default-shop.jpg",console.log("\u{1F3F7}\uFE0F \u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u043C \u0434\u0435\u0444\u043E\u043B\u0442\u043D\u043E\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435"));let e={title:this.editingShop?this.editingShop.title:this.newShop.title,address:this.editingShop?this.editingShop.address:this.newShop.address,description:this.editingShop?this.editingShop.description:this.newShop.description,imageUrl:t,phone:this.editingShop?this.editingShop.phone:this.newShop.phone,email:this.editingShop?this.editingShop.email:this.newShop.email,workingHours:this.editingShop?this.editingShop.workingHours:this.newShop.workingHours};if(this.editingShop)console.log("\u270F\uFE0F \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430:",this.editingShop.title),console.log("\u{1F4DD} \u0414\u0430\u043D\u043D\u044B\u0435 \u0434\u043B\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F:",e),await this.shopsService.updateShop(this.editingShop.id,e),console.log("\u2705 \u041C\u0430\u0433\u0430\u0437\u0438\u043D \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D \u0432 \u0441\u0435\u0440\u0432\u0438\u0441\u0435"),this.showNotification("success",`\u041C\u0430\u0433\u0430\u0437\u0438\u043D "${this.editingShop.title}" \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D!`);else{console.log("\u2795 \u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043D\u043E\u0432\u043E\u0433\u043E \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430"),console.log("\u{1F4DD} \u0414\u0430\u043D\u043D\u044B\u0435:",e);let n=await this.shopsService.addShop(e);console.log("\u2705 \u041D\u043E\u0432\u044B\u0439 \u043C\u0430\u0433\u0430\u0437\u0438\u043D \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D:",n),this.showNotification("success",`\u041C\u0430\u0433\u0430\u0437\u0438\u043D "${n.title}" \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D!`)}console.log("\u2705 \u0412\u0441\u0435 \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0438 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u044B \u0443\u0441\u043F\u0435\u0448\u043D\u043E"),this.isUploading=!1,this.cdr.detectChanges(),setTimeout(()=>{this.cancelEdit(),this.loadShops()},100)}catch(t){console.error("\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430:",t),this.isUploading=!1,this.cdr.detectChanges(),t.status===413?this.showNotification("error","\u0424\u0430\u0439\u043B \u0441\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0439. \u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 \u0440\u0430\u0437\u043C\u0435\u0440: 10MB"):t.status===415?this.showNotification("error","\u041D\u0435\u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043C\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u0444\u0430\u0439\u043B\u0430"):t.message?this.showNotification("error",`\u041E\u0448\u0438\u0431\u043A\u0430: ${t.message}`):this.showNotification("error","\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0441\u043D\u043E\u0432\u0430.")}}async uploadFileToSupabase(t,e,n){try{console.log("\u{1F4E4} \u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0444\u0430\u0439\u043B\u0430 \u043D\u0430\u043F\u0440\u044F\u043C\u0443\u044E \u0447\u0435\u0440\u0435\u0437 SupabaseClient");let o=t.name.split(".").pop()?.toLowerCase()||"jpg",c=`${Date.now()}_${Math.random().toString(36).substring(7)}.${o}`,f=n?`${n}/${c}`:c;console.log("\u{1F4C1} \u0424\u0430\u0439\u043B:",c),console.log("\u{1FAA3} Bucket:",e),console.log("\u{1F4C2} \u041F\u0443\u0442\u044C:",f);let y=this.supabaseService.getClient(),{data:Ut,error:Q}=await y.storage.from(e).upload(f,t,{cacheControl:"3600",upsert:!0,contentType:t.type});if(Q)throw console.error("\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0432 Supabase:",Q),Q;let{data:$t}=y.storage.from(e).getPublicUrl(f);return console.log("\u2705 \u0424\u0430\u0439\u043B \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D:",$t.publicUrl),$t.publicUrl}catch(o){throw console.error("\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u0432 uploadFileToSupabase:",o),o}}base64ToFile(t,e){let n=t.split(","),o=n[0].match(/:(.*?);/)?.[1]||"image/jpeg",c=atob(n[1]),f=c.length,y=new Uint8Array(f);for(;f--;)y[f]=c.charCodeAt(f);return new File([y],e,{type:o})}showNotification(t,e){alert(t==="success"?`\u2705 ${e}`:`\u274C ${e}`)}async deleteShop(t){if(confirm("\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u043C\u0430\u0433\u0430\u0437\u0438\u043D?"))try{await this.shopsService.deleteShop(t)&&(alert("\u041C\u0430\u0433\u0430\u0437\u0438\u043D \u0443\u0434\u0430\u043B\u0435\u043D!"),this.loadShops())}catch(e){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430:",e),alert("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D")}}cancelEdit(){this.isEditing=!1,this.editingShop=null,this.imagePreview=null,this.selectedFileName="",this.isUploading=!1,this.newShop={title:"",address:"",description:"",imageUrl:"",phone:"",email:"",workingHours:""},this.fileInput&&(this.fileInput.nativeElement.value=""),this.cdr.detectChanges(),console.log("\u{1F6AA} \u0424\u043E\u0440\u043C\u0430 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0437\u0430\u043A\u0440\u044B\u0442\u0430")}validateForm(){let t=this.editingShop||this.newShop;return!!t.title?.trim()&&!!t.address?.trim()&&!!t.description?.trim()}truncateText(t,e=100){return t?t.length<=e?t:t.substr(0,e)+"...":""}static \u0275fac=function(e){return new(e||i)(x(J),x(It),x(tt),x(et))};static \u0275cmp=M({type:i,selectors:[["app-admin-shops"]],viewQuery:function(e,n){if(e&1&&Kt(sn,5),e&2){let o;Yt(o=Jt())&&(n.fileInput=o.first)}},decls:10,vars:2,consts:[["fileInput",""],[1,"admin-shops"],[1,"admin-header"],[1,"btn-add",3,"click"],["viewBox","0 0 24 24"],["d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"],[1,"edit-form"],[1,"shops-list"],["type","file","accept","image/*",2,"display","none",3,"change"],[1,"form-grid"],[1,"form-group"],["type","text","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",3,"ngModelChange","ngModel"],["type","text","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u043E\u043B\u043D\u044B\u0439 \u0430\u0434\u0440\u0435\u0441",3,"ngModelChange","ngModel"],[1,"form-group","full-width"],[1,"image-upload-section"],[1,"image-preview"],[1,"upload-container",3,"click"],["viewBox","0 0 24 24",1,"upload-icon"],["d","M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"],[1,"upload-text"],[1,"upload-title"],[1,"upload-subtitle"],[1,"url-alternative"],["type","text","placeholder","https://example.com/shop-image.jpg",1,"url-input",3,"ngModelChange","ngModel"],["type","tel","placeholder","+7 (XXX) XXX-XX-XX",3,"ngModelChange","ngModel"],["type","email","placeholder","email@example.com",3,"ngModelChange","ngModel"],["type","text","placeholder","\u041F\u043D-\u041F\u0442: 9:00-18:00",3,"ngModelChange","ngModel"],["rows","4","placeholder","\u041E\u043F\u0438\u0448\u0438\u0442\u0435 \u043C\u0430\u0433\u0430\u0437\u0438\u043D",3,"ngModelChange","ngModel"],[1,"form-actions"],[1,"btn-save",3,"click","disabled"],[1,"btn-cancel",3,"click","disabled"],["alt","\u041F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440",3,"src"],["type","button",1,"btn-remove-image",3,"click"],[1,"shop-item"],[1,"no-items"],[1,"shop-item-preview"],[3,"src","alt"],[1,"shop-item-info"],[1,"address"],[1,"description"],[1,"shop-details"],[1,"shop-item-actions"],[1,"btn-edit",3,"click"],["d","M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"],[1,"btn-delete",3,"click"],["d","M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"]],template:function(e,n){e&1&&(r(0,"div",1)(1,"div",2)(2,"h1"),a(3,"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430\u043C\u0438"),l(),r(4,"button",3),h("click",function(){return n.startAddShop()}),w(),r(5,"svg",4),b(6,"path",5),l(),a(7," \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D "),l()(),C(8,dn,52,18,"div",6),C(9,hn,4,1,"div",7),l()),e&2&&(s(8),_(n.isEditing?8:-1),s(),_(n.isEditing?-1:9))},dependencies:[k,K,ht,ft,Ct],styles:['@charset "UTF-8";.admin-shops[_ngcontent-%COMP%]   .admin-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.admin-shops[_ngcontent-%COMP%]   .admin-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#333}.admin-shops[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#28a745;color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-weight:500;transition:background .3s ease}.admin-shops[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;fill:#fff}.admin-shops[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]:hover{background:#218838}.edit-form[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:30px;margin-bottom:30px;box-shadow:0 2px 10px #0000001a}.edit-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;margin-bottom:25px;color:#333}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-bottom:25px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#555}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{content:""}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 3px #007bff1a}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-actions[_ngcontent-%COMP%]{display:flex;gap:10px;padding-top:20px;border-top:1px solid #eee}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 25px;border:none;border-radius:4px;cursor:pointer;font-weight:500;transition:all .3s ease}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.form-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background:#007bff;color:#fff}.form-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3}.form-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.form-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background:#545b62}.shops-list[_ngcontent-%COMP%]   .shop-item[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;margin-bottom:20px;box-shadow:0 2px 5px #0000000d;transition:box-shadow .3s ease}.shops-list[_ngcontent-%COMP%]   .shop-item[_ngcontent-%COMP%]:hover{box-shadow:0 5px 15px #0000001a}.shops-list[_ngcontent-%COMP%]   .shop-item-preview[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:15px}.shops-list[_ngcontent-%COMP%]   .shop-item-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:100px;object-fit:cover;border-radius:4px}.shops-list[_ngcontent-%COMP%]   .shop-item-info[_ngcontent-%COMP%]{flex:1}.shops-list[_ngcontent-%COMP%]   .shop-item-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;color:#333}.shops-list[_ngcontent-%COMP%]   .shop-item-info[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]{color:#666;margin:0 0 10px;font-size:14px}.shops-list[_ngcontent-%COMP%]   .shop-item-info[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#777;margin:0 0 10px;font-size:14px;line-height:1.4}.shops-list[_ngcontent-%COMP%]   .shop-item-info[_ngcontent-%COMP%]   .shop-details[_ngcontent-%COMP%]{display:flex;gap:20px;font-size:13px;color:#888}.shops-list[_ngcontent-%COMP%]   .shop-item-info[_ngcontent-%COMP%]   .shop-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.shops-list[_ngcontent-%COMP%]   .shop-item-actions[_ngcontent-%COMP%]{display:flex;gap:10px;border-top:1px solid #eee;padding-top:15px}.shops-list[_ngcontent-%COMP%]   .shop-item-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 15px;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s ease}.shops-list[_ngcontent-%COMP%]   .shop-item-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.shops-list[_ngcontent-%COMP%]   .shop-item-actions[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#ffc107;color:#333}.shops-list[_ngcontent-%COMP%]   .shop-item-actions[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]:hover{background:#e0a800}.shops-list[_ngcontent-%COMP%]   .shop-item-actions[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.shops-list[_ngcontent-%COMP%]   .shop-item-actions[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]:hover{background:#c82333}.no-items[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666;background:#f8f9fa;border-radius:8px;border:2px dashed #dee2e6}@media(max-width:768px){.admin-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start!important;gap:15px}.admin-header[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{align-self:stretch;justify-content:center}.shop-item-preview[_ngcontent-%COMP%]{flex-direction:column}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.image-upload-section[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{position:relative;width:200px;height:150px;margin-bottom:15px;border-radius:8px;overflow:hidden;border:1px solid #ddd}.image-upload-section[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.image-upload-section[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .btn-remove-image[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;width:28px;height:28px;background:#000000b3;color:#fff;border:none;border-radius:50%;cursor:pointer;font-size:18px;line-height:1;display:flex;align-items:center;justify-content:center;transition:background .3s ease}.image-upload-section[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .btn-remove-image[_ngcontent-%COMP%]:hover{background:#000000e6}.image-upload-section[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding:20px;border:2px dashed #ccc;border-radius:8px;background:#f8f9fa;cursor:pointer;transition:all .3s ease;margin-bottom:15px}.image-upload-section[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]:hover{border-color:#007bff;background:#e9f5ff}.image-upload-section[_ngcontent-%COMP%]   .upload-container.has-file[_ngcontent-%COMP%]{border-color:#28a745;background:#f0fff4}.image-upload-section[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{width:40px;height:40px;fill:#6c757d;margin-right:15px;flex-shrink:0}.upload-container[_ngcontent-%COMP%]:hover   .image-upload-section[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{fill:#007bff}.image-upload-section[_ngcontent-%COMP%]   .upload-text[_ngcontent-%COMP%]{flex:1}.image-upload-section[_ngcontent-%COMP%]   .upload-text[_ngcontent-%COMP%]   .upload-title[_ngcontent-%COMP%]{margin:0 0 5px;font-weight:500;color:#333;word-break:break-all}.image-upload-section[_ngcontent-%COMP%]   .upload-text[_ngcontent-%COMP%]   .upload-subtitle[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#6c757d}.image-upload-section[_ngcontent-%COMP%]   .url-alternative[_ngcontent-%COMP%]{margin-top:20px;padding-top:20px;border-top:1px solid #eee}.image-upload-section[_ngcontent-%COMP%]   .url-alternative[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 10px;color:#666;font-size:14px}.image-upload-section[_ngcontent-%COMP%]   .url-alternative[_ngcontent-%COMP%]   .url-input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px}.image-upload-section[_ngcontent-%COMP%]   .url-alternative[_ngcontent-%COMP%]   .url-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 3px #007bff1a}.form-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{position:relative}.form-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.form-actions[_ngcontent-%COMP%]   .btn-save.loading[_ngcontent-%COMP%]{padding-left:40px}.form-actions[_ngcontent-%COMP%]   .btn-save.loading[_ngcontent-%COMP%]:before{content:"";position:absolute;left:15px;top:50%;transform:translateY(-50%);width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:translateY(-50%) rotate(360deg)}}@media(max-width:768px){.image-upload-section[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]{flex-direction:column;text-align:center;padding:15px}.image-upload-section[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{margin-right:0;margin-bottom:10px}}.upload-container.dragging[_ngcontent-%COMP%]{border-color:#007bff;background:#e9f5ff;border-style:solid}']})};var _e=[{path:"",component:St,title:"\u0422\u043E\u0440\u0433\u043E\u0432\u044B\u0439 \u0434\u043E\u043C KOMFORT - \u0413\u043B\u0430\u0432\u043D\u0430\u044F"},{path:"about",component:it,title:"\u041E \u043A\u043E\u043C\u043F\u0430\u043D\u0438\u0438 KOMFORT"},{path:"contacts",component:ot,title:"\u041A\u043E\u043D\u0442\u0430\u043A\u0442\u044B \u0422\u043E\u0440\u0433\u043E\u0432\u043E\u0433\u043E \u0434\u043E\u043C\u0430 KOMFORT"},{path:"catalog/:category",component:st},{path:"shops",component:kt,title:"\u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B KOMFORT"},{path:"catalog",component:st,title:"\u041A\u0430\u0442\u0430\u043B\u043E\u0433 \u043C\u0435\u0431\u0435\u043B\u0438 KOMFORT"},{path:"login",component:yt},{path:"admin",component:wt,canActivate:[Et],children:[{path:"products",loadComponent:()=>import("./chunk-GNL6YPTE.js").then(i=>i.AdminProductsComponent)},{path:"catalog",loadComponent:()=>import("./chunk-NH6TSEZ7.js").then(i=>i.AdminCatalogComponent)},{path:"shops",component:Tt},{path:"contacts",loadComponent:()=>import("./chunk-X2XZKYWO.js").then(i=>i.AdminContactsComponent)},{path:"home",loadComponent:()=>import("./chunk-JU3WSKH4.js").then(i=>i.AdminHomeComponent)},{path:"",redirectTo:"products",pathMatch:"full"},{path:"logout",loadComponent:()=>import("./chunk-DEMSOHOT.js").then(i=>i.AdminLogoutComponent)}]},{path:"**",redirectTo:""}];var xe={providers:[le(_e),ae(),se(re())]};function fn(i,t){if(i&1){let e=P();r(0,"div",28),h("click",function(){let o=u(e).$implicit,c=g();return m(c.navigateToCategory(o))}),a(1),l()}if(i&2){let e=t.$implicit;s(),T(" ",e.title," ")}}function Cn(i,t){if(i&1){let e=P();r(0,"button",29),h("click",function(){u(e);let o=g();return m(o.goToAdminPanel())}),w(),r(1,"svg",30),b(2,"path",31),l()(),U(),r(3,"button",32),h("click",function(){u(e);let o=g();return m(o.logout())}),w(),r(4,"svg",30),b(5,"path",33),l()()}}function _n(i,t){if(i&1){let e=P();r(0,"button",34),h("click",function(){u(e);let o=g();return m(o.loginAdmin())}),w(),r(1,"svg",30),b(2,"path",31),l()()}}function xn(i,t){if(i&1){let e=P();r(0,"div",35),h("click",function(){let o=u(e).$implicit,c=g();return m(c.navigateToCategory(o))}),a(1),l()}if(i&2){let e=t.$implicit;s(),T(" ",e.title," ")}}function vn(i,t){if(i&1){let e=P();r(0,"button",36),h("click",function(){u(e);let o=g();return m(o.goToAdminPanel())}),w(),r(1,"svg",37),b(2,"path",38),l(),U(),r(3,"span"),a(4,"\u0410\u0434\u043C\u0438\u043D-\u043F\u0430\u043D\u0435\u043B\u044C"),l()(),r(5,"button",39),h("click",function(){u(e);let o=g();return m(o.logout())}),w(),r(6,"svg",37),b(7,"path",33),l(),U(),r(8,"span"),a(9,"\u0412\u044B\u0439\u0442\u0438"),l()()}}function bn(i,t){if(i&1){let e=P();r(0,"button",36),h("click",function(){u(e);let o=g();return m(o.loginAdmin())}),w(),r(1,"svg",37),b(2,"path",31),l(),U(),r(3,"span"),a(4,"\u0412\u0445\u043E\u0434 \u0434\u043B\u044F \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u0430"),l()()}}var Ft=class i{router=L(B);catalogService=L(W);authService=L(Y);cdRef=L(tt);subscription;isMenuOpen=$(!1,{});isCatalogOpen=$(!1,{});isMobileCatalogOpen=$(!1,{});categories=[];ngOnInit(){setTimeout(()=>{this.loadCategories()},0)}loadCategories(){this.subscription=this.catalogService.categories$.subscribe(t=>{let e=t.filter(n=>n.isActive).sort((n,o)=>n.order-o.order).map(n=>G(z({},n),{image:this.cleanCategoryImage(n.image)}));setTimeout(()=>{this.categories=e,this.cdRef.detectChanges()},0)})}cleanCategoryImage(t){if(!t)return"assets/default-category.jpg";if(t.startsWith("assets/")||t.startsWith("/assets/"))return t.startsWith("/")?t:"/"+t;if(t.startsWith("data:image")){let e={1:"assets/livingroom.jpg",2:"assets/bedroom.jpg",3:"assets/kitchen.jpg",4:"assets/other.jpg"};return"assets/default-category.jpg"}return t.endsWith(".jpg")||t.endsWith(".jpeg")||t.endsWith(".png")?`/assets/${t.split("/").pop()}`:"assets/default-category.jpg"}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}toggleMenu(){this.isMenuOpen.update(t=>!t)}closeMenu(){this.isMenuOpen.set(!1),this.isMobileCatalogOpen.set(!1)}showCatalogDropdown(){this.isCatalogOpen.set(!0)}hideCatalogDropdown(){this.isCatalogOpen.set(!1)}toggleMobileCatalog(){this.isMobileCatalogOpen.update(t=>!t)}navigateToCategory(t){this.router.navigate(["/catalog",t.slug]),this.closeMenu(),this.hideCatalogDropdown()}loginAdmin(){this.router.navigate(["/login"]),this.closeMenu()}logout(){this.authService.logout(),this.closeMenu()}goToAdminPanel(){this.authService.navigateToAdmin(),this.closeMenu()}isLoggedIn(){return this.authService.isLoggedIn()}isAdmin(){return this.authService.isAdmin()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-header"]],decls:43,vars:11,consts:[[1,"header"],[1,"header-content"],["routerLink","/",1,"logo"],["src","assets/komfort.png","alt","komfort",1,"logo-img"],[1,"nav-headings"],["routerLink","/about","routerLinkActive","active",1,"nav-heading"],[1,"nav-heading","catalog-item",3,"mouseenter","mouseleave"],[1,"dropdown-menu"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],["routerLink","/shops","routerLinkActive","active",1,"nav-heading"],["routerLink","/contacts","routerLinkActive","active",1,"nav-heading"],[1,"header-right"],["title","\u0412\u0445\u043E\u0434 \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u0430",1,"admin-btn-icon","desktop-admin-btn"],[1,"menu-toggle",3,"click"],[1,"mobile-menu"],[1,"mobile-menu-content"],[1,"menu-close",3,"click"],["routerLink","/about","routerLinkActive","active",1,"mobile-nav-heading",3,"click"],[1,"mobile-catalog-item"],[1,"mobile-nav-heading","catalog-toggle",3,"click"],[1,"catalog-arrow"],[1,"mobile-catalog-dropdown"],["class","mobile-dropdown-item",3,"click",4,"ngFor","ngForOf"],["routerLink","/shops","routerLinkActive","active",1,"mobile-nav-heading",3,"click"],["routerLink","/contacts","routerLinkActive","active",1,"mobile-nav-heading",3,"click"],[1,"mobile-admin-section",3,"click"],[1,"mobile-admin-btn"],[1,"menu-overlay",3,"click"],[1,"dropdown-item",3,"click"],["title","\u0410\u0434\u043C\u0438\u043D-\u043F\u0430\u043D\u0435\u043B\u044C",1,"admin-btn-icon","desktop-admin-btn",3,"click"],["viewBox","0 0 24 24",1,"admin-icon"],["d","M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"],["title","\u0412\u044B\u0439\u0442\u0438 \u0438\u0437 \u0430\u0434\u043C\u0438\u043D-\u043F\u0430\u043D\u0435\u043B\u0438",1,"admin-btn-icon","desktop-admin-btn","logout-btn",3,"click"],["d","M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"],["title","\u0412\u0445\u043E\u0434 \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u0430",1,"admin-btn-icon","desktop-admin-btn",3,"click"],[1,"mobile-dropdown-item",3,"click"],[1,"mobile-admin-btn",3,"click"],["viewBox","0 0 24 24",1,"mobile-admin-icon"],["d","M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"],[1,"mobile-admin-btn","logout-btn",3,"click"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"a",2),b(3,"img",3),l(),r(4,"div",4)(5,"a",5),a(6," \u041E \u043D\u0430\u0441 "),l(),r(7,"div",6),h("mouseenter",function(){return n.showCatalogDropdown()})("mouseleave",function(){return n.hideCatalogDropdown()}),a(8," \u041A\u0430\u0442\u0430\u043B\u043E\u0433 "),r(9,"div",7),q(10,fn,2,1,"div",8),l()(),r(11,"a",9),a(12," \u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B "),l(),r(13,"a",10),a(14," \u041A\u043E\u043D\u0442\u0430\u043A\u0442\u044B "),l()(),r(15,"div",11),C(16,Cn,6,0)(17,_n,3,0,"button",12),r(18,"button",13),h("click",function(){return n.toggleMenu()}),b(19,"span")(20,"span")(21,"span"),l()()()(),r(22,"div",14)(23,"div",15)(24,"button",16),h("click",function(){return n.closeMenu()}),a(25,"\xD7"),l(),r(26,"a",17),h("click",function(){return n.closeMenu()}),a(27," \u041E \u043D\u0430\u0441 "),l(),r(28,"div",18)(29,"div",19),h("click",function(){return n.toggleMobileCatalog()}),a(30," \u041A\u0430\u0442\u0430\u043B\u043E\u0433 "),r(31,"span",20),a(32),l()(),r(33,"div",21),q(34,xn,2,1,"div",22),l()(),r(35,"a",23),h("click",function(){return n.closeMenu()}),a(36," \u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B "),l(),r(37,"a",24),h("click",function(){return n.closeMenu()}),a(38," \u041A\u043E\u043D\u0442\u0430\u043A\u0442\u044B "),l(),r(39,"div",25),h("click",function(){return n.closeMenu()}),C(40,vn,10,0)(41,bn,5,0,"button",26),l()(),r(42,"div",27),h("click",function(){return n.closeMenu()}),l()()),e&2&&(s(9),E("show",n.isCatalogOpen()),s(),O("ngForOf",n.categories),s(6),_(n.isLoggedIn()?16:17),s(6),E("active",n.isMenuOpen()),s(10),v(n.isMobileCatalogOpen()?"\u2212":"+"),s(),E("show",n.isMobileCatalogOpen()),s(),O("ngForOf",n.categories),s(6),_(n.isLoggedIn()?40:41))},dependencies:[k,lt,mt,gt,ut],styles:['@charset "UTF-8";.header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000;height:80px;background-color:#fff;color:#000;display:flex;justify-content:space-between;align-items:center;border-bottom:5px solid #D3D3D3;padding:0 20px;width:100%;box-sizing:border-box}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.logo[_ngcontent-%COMP%]{width:auto;margin-left:80px;min-width:150px;flex-shrink:0;display:flex;align-items:center}@media(max-width:1024px){.logo[_ngcontent-%COMP%]{margin-left:0;min-width:120px}}@media(max-width:768px){.logo[_ngcontent-%COMP%]{margin-left:0;min-width:auto}}.logo-img[_ngcontent-%COMP%]{height:50px;display:block}@media(max-width:1024px){.logo-img[_ngcontent-%COMP%]{height:40px}}@media(max-width:768px){.logo-img[_ngcontent-%COMP%]{height:35px}}.logo-sub[_ngcontent-%COMP%]{font-family:Geometria,Montserrat,sans-serif;font-weight:700;font-size:18px;letter-spacing:4px;text-transform:uppercase;color:#000;margin-top:5px;opacity:.9;line-height:1}@media(max-width:1024px){.logo-sub[_ngcontent-%COMP%]{font-size:16px;letter-spacing:2px}}@media(max-width:768px){.logo-sub[_ngcontent-%COMP%]{font-size:14px;letter-spacing:1.5px}}.nav-headings[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-grow:1;min-width:600px;margin:0 50px}@media(max-width:1024px){.nav-headings[_ngcontent-%COMP%]{min-width:500px;justify-content:flex-start;margin:0 30px}}@media(max-width:768px){.nav-headings[_ngcontent-%COMP%]{display:none}}.nav-heading[_ngcontent-%COMP%]{margin:0 25px;font-family:Geometria,Montserrat,sans-serif;font-weight:500;letter-spacing:1.5px;text-transform:uppercase;font-size:16px;cursor:pointer;position:relative;padding-bottom:5px;transition:color .3s ease;white-space:nowrap}@media(max-width:1024px){.nav-heading[_ngcontent-%COMP%]{margin:0 15px;font-size:14px}}@media(max-width:768px){.nav-heading[_ngcontent-%COMP%]{margin:0 10px;font-size:13px}}.nav-heading[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:0;height:2px;background-color:#ff6b6b;transition:width .3s ease}.nav-heading[_ngcontent-%COMP%]:hover{color:#ff6b6b}.nav-heading[_ngcontent-%COMP%]:hover:after{width:100%}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;flex-shrink:0;margin-right:70px}@media(max-width:768px){.header-right[_ngcontent-%COMP%]{gap:15px}}.desktop-admin-btn[_ngcontent-%COMP%]{background:transparent;border:none;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;margin-right:0;flex-shrink:0}.desktop-admin-btn[_ngcontent-%COMP%]:hover{background:#0000001a}.desktop-admin-btn[_ngcontent-%COMP%]   .admin-icon[_ngcontent-%COMP%]{width:24px;height:24px;fill:#333}@media(max-width:768px){.desktop-admin-btn[_ngcontent-%COMP%]{display:none}}.menu-toggle[_ngcontent-%COMP%]{display:none;background:none;border:none;width:30px;height:24px;position:relative;cursor:pointer;flex-direction:column;justify-content:space-between;padding:0;flex-shrink:0}.menu-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;height:3px;width:100%;background-color:#000;border-radius:3px;transition:.3s}@media(max-width:768px){.menu-toggle[_ngcontent-%COMP%]{display:flex}}.catalog-item[_ngcontent-%COMP%]{position:relative;flex-shrink:0}.catalog-item[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:-50%;width:180px;background:#fff;box-shadow:0 5px 15px #0000001a;border-radius:0 0 8px 8px;overflow:hidden;opacity:0;visibility:hidden;transform:translateY(-10px);transition:all .3s ease;z-index:1001}.catalog-item[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.catalog-item[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{padding:12px 45px;font-family:Geometria,Montserrat,sans-serif;font-size:14px;color:#333;cursor:pointer;transition:all .2s ease;border-bottom:1px solid rgba(0,0,0,.05)}.catalog-item[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.catalog-item[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background:#f8f9fa;color:#ff6b6b;padding-left:25px}.catalog-item[_ngcontent-%COMP%]   .dropdown-arrow[_ngcontent-%COMP%]{font-size:10px;margin-left:5px;transition:transform .3s ease}.catalog-item[_ngcontent-%COMP%]:hover   .dropdown-arrow[_ngcontent-%COMP%]{transform:rotate(180deg)}@media(max-width:768px){.catalog-item[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{display:none}}.mobile-menu[_ngcontent-%COMP%]{position:fixed;top:0;right:-100%;width:80%;max-width:300px;height:100vh;background-color:#fff;z-index:1000;transition:right .3s ease}.mobile-menu.active[_ngcontent-%COMP%]{right:0}.mobile-menu-content[_ngcontent-%COMP%]{padding:80px 20px 20px;position:relative;height:100%;display:flex;flex-direction:column}.menu-close[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background:none;border:none;font-size:30px;color:#000;cursor:pointer;line-height:1}.mobile-nav-heading[_ngcontent-%COMP%]{padding:15px 0;font-size:18px;border-bottom:1px solid rgba(0,0,0,.1);cursor:pointer;font-family:Geometria,Montserrat,sans-serif;font-weight:500;text-transform:uppercase}.mobile-nav-heading[_ngcontent-%COMP%]:last-child{border-bottom:none}.mobile-catalog-item[_ngcontent-%COMP%]   .catalog-toggle[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.mobile-catalog-item[_ngcontent-%COMP%]   .catalog-toggle[_ngcontent-%COMP%]   .catalog-arrow[_ngcontent-%COMP%]{font-size:20px;font-weight:300}.mobile-catalog-item[_ngcontent-%COMP%]   .mobile-catalog-dropdown[_ngcontent-%COMP%]{max-height:0;overflow:hidden;transition:max-height .3s ease;background:#00000005}.mobile-catalog-item[_ngcontent-%COMP%]   .mobile-catalog-dropdown.show[_ngcontent-%COMP%]{max-height:300px}.mobile-catalog-item[_ngcontent-%COMP%]   .mobile-catalog-dropdown[_ngcontent-%COMP%]   .mobile-dropdown-item[_ngcontent-%COMP%]{padding:12px 20px 12px 40px;font-size:16px;color:#555;cursor:pointer;border-bottom:1px solid rgba(0,0,0,.05);font-family:Geometria,Montserrat,sans-serif}.mobile-catalog-item[_ngcontent-%COMP%]   .mobile-catalog-dropdown[_ngcontent-%COMP%]   .mobile-dropdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.mobile-catalog-item[_ngcontent-%COMP%]   .mobile-catalog-dropdown[_ngcontent-%COMP%]   .mobile-dropdown-item[_ngcontent-%COMP%]:hover{background:#00000008}.mobile-admin-section[_ngcontent-%COMP%]{margin-top:auto;padding:20px 0;border-top:2px solid rgba(0,0,0,.1)}.mobile-admin-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;background:transparent;border:none;width:100%;padding:10px;border-radius:8px;cursor:pointer;transition:all .3s ease;font-family:Geometria,Montserrat,sans-serif;font-size:16px;font-weight:500;color:#333}.mobile-admin-btn[_ngcontent-%COMP%]:hover{background:#0000000d}.mobile-admin-btn[_ngcontent-%COMP%]   .mobile-admin-icon[_ngcontent-%COMP%]{width:24px;height:24px;fill:#333}.menu-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:999;display:none}.mobile-menu.active[_ngcontent-%COMP%] ~ .menu-overlay[_ngcontent-%COMP%]{display:block}@media(max-width:1024px){.header[_ngcontent-%COMP%]{padding:0 30px}.header-content[_ngcontent-%COMP%]{max-width:100%}.nav-headings[_ngcontent-%COMP%]{margin:0 20px}}@media(max-width:768px){.header[_ngcontent-%COMP%]{padding:0 15px;justify-content:space-between}.header-content[_ngcontent-%COMP%]{justify-content:space-between;width:100%}.mobile-menu.active[_ngcontent-%COMP%] ~ .menu-overlay[_ngcontent-%COMP%]{display:block}}.nav-heading.active[_ngcontent-%COMP%]{color:#ff6b6b;font-weight:600;border-bottom:2px solid #ff6b6b}.mobile-nav-heading.active[_ngcontent-%COMP%]{color:#667eea;font-weight:600}a.nav-heading[_ngcontent-%COMP%], a.mobile-nav-heading[_ngcontent-%COMP%]{text-decoration:none;color:inherit;cursor:pointer;display:block}.logout-btn[_ngcontent-%COMP%]{background-color:#dc3545!important}.logout-btn[_ngcontent-%COMP%]:hover{background-color:#c82333!important}.logout-btn[_ngcontent-%COMP%]   .admin-icon[_ngcontent-%COMP%]{fill:#fff!important}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-right:10px}.header-right[_ngcontent-%COMP%]   .desktop-admin-btn[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:transparent;border:none;border-radius:50%;cursor:pointer;transition:all .3s ease;flex-shrink:0}.header-right[_ngcontent-%COMP%]   .desktop-admin-btn[_ngcontent-%COMP%]:hover{background:#0000001a}.header-right[_ngcontent-%COMP%]   .desktop-admin-btn[_ngcontent-%COMP%]   .admin-icon[_ngcontent-%COMP%]{width:24px;height:24px;fill:#333}.mobile-admin-btn.logout-btn[_ngcontent-%COMP%]{background-color:#dc3545!important;color:#fff!important}.mobile-admin-btn.logout-btn[_ngcontent-%COMP%]:hover{background-color:#c82333!important}.mobile-admin-btn.logout-btn[_ngcontent-%COMP%]   .mobile-admin-icon[_ngcontent-%COMP%]{fill:#fff!important}@media(max-width:768px){.header-right[_ngcontent-%COMP%]   .admin-btn-icon[_ngcontent-%COMP%], .header-right[_ngcontent-%COMP%]   .desktop-admin-btn[_ngcontent-%COMP%]{display:none!important}}']})};var Dt=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-root"]],decls:2,vars:0,template:function(e,n){e&1&&b(0,"app-header")(1,"router-outlet")},dependencies:[pt,Ft],encapsulation:2})};ie(Dt,xe).then(i=>{let t=i.injector;window.productService=t.get(xt),window.supabaseService=t.get(et),window.catalogService=t.get(W),window.shopsService=t.get(J),window.homePageService=t.get(nt),window.contactService=t.get(_t),console.log("\u{1F389} \u0421\u0435\u0440\u0432\u0438\u0441\u044B \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u044B \u0432 \u043A\u043E\u043D\u0441\u043E\u043B\u0438!"),console.log("\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435:"),console.log("- window.productService.testSupabase()"),console.log("- window.supabaseService.getProducts()"),console.log("- window.catalogService.loadCategories()"),console.log("- window.shopsService.getShops()"),console.log("- window.homePageService.loadHomePageData()"),console.log("- window.contactService.sendTestMessage()")});
