<div class="header">
  <!-- Обертка для всего контента -->
  <div class="header-content">
    <a routerLink="/" class="logo">
      <img class="logo-img" src="assets/komfort.png" alt="komfort">
    </a>
    
    <div class="nav-headings">
      <!-- О нас -->
      <a routerLink="/about" routerLinkActive="active" class="nav-heading">
        О нас
      </a>
      
      <!-- Элемент с выпадающим меню -->
      <div class="nav-heading catalog-item" 
           (mouseenter)="showCatalogDropdown()" 
           (mouseleave)="hideCatalogDropdown()">
        Каталог
        <!-- Выпадающий список -->
        <div class="dropdown-menu" [class.show]="isCatalogOpen()">
          <!-- Динамические категории -->
          <div *ngFor="let category of categories" 
               class="dropdown-item"
               (click)="navigateToCategory(category)">
            {{ category.title }}
          </div>
        </div>
      </div>
      
      <a routerLink="/shops" routerLinkActive="active" class="nav-heading">
        Магазины
      </a>
      
      <!-- Контакты -->
      <a routerLink="/contacts" routerLinkActive="active" class="nav-heading">
        Контакты
      </a>
    </div>

    <!-- Правая часть: админ-кнопка и гамбургер -->
    <div class="header-right">
      @if (isLoggedIn()) {
        <!-- Кнопка перехода в админ-панель -->
        <button class="admin-btn-icon desktop-admin-btn" 
                (click)="goToAdminPanel()" 
                title="Админ-панель">
          <svg class="admin-icon" viewBox="0 0 24 24">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
          </svg>
        </button>
        
        <!-- Кнопка выхода -->
        <button class="admin-btn-icon desktop-admin-btn logout-btn" 
                (click)="logout()" 
                title="Выйти из админ-панели">
          <svg class="admin-icon" viewBox="0 0 24 24">
            <path d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/>
          </svg>
        </button>
      } @else {
        <!-- Кнопка входа для неавторизованных -->
        <button class="admin-btn-icon desktop-admin-btn" 
                (click)="loginAdmin()" 
                title="Вход администратора">
          <svg class="admin-icon" viewBox="0 0 24 24">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
          </svg>
        </button>
      }
      
      <button class="menu-toggle" (click)="toggleMenu()">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </div>
</div>

<!-- Мобильное меню -->
<div class="mobile-menu" [class.active]="isMenuOpen()">
  <div class="mobile-menu-content">
    <button class="menu-close" (click)="closeMenu()">×</button>
    
    <!-- О нас -->
    <a routerLink="/about" routerLinkActive="active" class="mobile-nav-heading" (click)="closeMenu()">
      О нас
    </a>
    
    <!-- Каталог в мобильном меню с аккордеоном -->
    <div class="mobile-catalog-item">
      <div class="mobile-nav-heading catalog-toggle" (click)="toggleMobileCatalog()">
        Каталог
        <span class="catalog-arrow">{{ isMobileCatalogOpen() ? '−' : '+' }}</span>
      </div>
      <div class="mobile-catalog-dropdown" [class.show]="isMobileCatalogOpen()">
        <!-- Динамические категории для мобильной версии -->
        <div *ngFor="let category of categories" 
             class="mobile-dropdown-item" 
             (click)="navigateToCategory(category)">
          {{ category.title }}
        </div>
      </div>
    </div>
    
    <a routerLink="/shops" routerLinkActive="active" class="mobile-nav-heading" (click)="closeMenu()">
      Магазины
    </a>
    
    <!-- Контакты -->
    <a routerLink="/contacts" routerLinkActive="active" class="mobile-nav-heading" (click)="closeMenu()">
      Контакты
    </a>
    
    <!-- Кнопки администратора для мобильной версии -->
    <div class="mobile-admin-section" (click)="closeMenu()">
      @if (isLoggedIn()) {
        <!-- Переход в админ-панель в мобильном меню -->
        <button class="mobile-admin-btn" (click)="goToAdminPanel()">
          <svg class="mobile-admin-icon" viewBox="0 0 24 24">
            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
          </svg>
          <span>Админ-панель</span>
        </button>
        
        <!-- Выход в мобильном меню -->
        <button class="mobile-admin-btn logout-btn" (click)="logout()">
          <svg class="mobile-admin-icon" viewBox="0 0 24 24">
            <path d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/>
          </svg>
          <span>Выйти</span>
        </button>
      } @else {
        <!-- Вход в мобильном меню -->
        <button class="mobile-admin-btn" (click)="loginAdmin()">
          <svg class="mobile-admin-icon" viewBox="0 0 24 24">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
          </svg>
          <span>Вход для администратора</span>
        </button>
      }
    </div>
  </div>
  <div class="menu-overlay" (click)="closeMenu()"></div>
</div>