<div class="admin-section">
  <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h2>
  
  <div class="tabs">
    <button class="tab-btn" 
            [class.active]="activeTab === 'slides'"
            (click)="switchTab('slides')">
      –°–ª–∞–π–¥—ã
    </button>
    <button class="tab-btn" 
            [class.active]="activeTab === 'company'"
            (click)="switchTab('company')">
      –û –∫–æ–º–ø–∞–Ω–∏–∏
    </button>
  </div>

  <!-- –í–∫–ª–∞–¥–∫–∞ –°–ª–∞–π–¥—ã -->
  @if (activeTab === 'slides') {
  <div class="tab-content active" id="slides">
    <div class="admin-form">
      <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–∞–π–¥–∞–º–∏</h3>
      
      <div class="form-group">
        <label>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Å–ª–∞–π–¥:</label>
        <div class="slide-form">
          <div class="image-upload-section">
            <div class="image-url-input">
              <input [(ngModel)]="newSlide.image" 
                     placeholder="URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è" 
                     class="form-control">
              <span class="or-text">–∏–ª–∏</span>
              <button type="button" 
                      class="btn btn-secondary"
                      (click)="openFilePickerForNewSlide()">
                üìÅ –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª
              </button>
            </div>
            <input type="file" 
                   #fileInput 
                   accept="image/*" 
                   class="file-input-hidden"
                   (change)="onFileSelectedForNewSlide($event)">
            
            @if (newSlide.image && isImageUrl(newSlide.image)) {
              <div class="image-preview">
                <img [src]="newSlide.image" 
                     alt="–ü—Ä–µ–≤—å—é" 
                     (error)="clearNewSlideImage()"
                     class="preview-image">
                <button type="button" 
                        class="btn btn-sm btn-danger remove-preview"
                        (click)="clearNewSlideImage()">
                  ‚úï –£–¥–∞–ª–∏—Ç—å
                </button>
              </div>
            }
          </div>
          
          <input [(ngModel)]="newSlide.title" 
                 placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫" 
                 class="form-control">
          <textarea [(ngModel)]="newSlide.description" 
                    placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" 
                    class="form-control" 
                    rows="2"></textarea>
          <button (click)="addSlide()" 
                  class="btn btn-primary"
                  [disabled]="!newSlide.image">
            –î–æ–±–∞–≤–∏—Ç—å —Å–ª–∞–π–¥
          </button>
        </div>
      </div>

        <div class="slides-list">
          <div class="section-header">
            <h4>–¢–µ–∫—É—â–∏–µ —Å–ª–∞–π–¥—ã</h4>
            <div class="slide-counter">
              –í—Å–µ–≥–æ —Å–ª–∞–π–¥–æ–≤: <strong>{{slides.length}}</strong>
            </div>
          </div>
          
          @if (slides.length === 0) {
            <div class="empty-state">
              <div class="empty-icon">üì∑</div>
              <h3>–°–ª–∞–π–¥—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</h3>
              <p>–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π —Å–ª–∞–π–¥, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å</p>
            </div>
          } @else {
            @for (slide of slides; track slide.image; let i = $index) {
              <div class="slide-item">
                <div class="slide-preview">
                  <img [src]="slide.image" 
                       alt="–ü—Ä–µ–≤—å—é —Å–ª–∞–π–¥–∞" 
                       (error)="handleImageError($event)">
                </div>
                <div class="slide-details">
                  <input [(ngModel)]="slide.title" 
                         class="form-control" 
                         placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–ª–∞–π–¥–∞">
                  <textarea [(ngModel)]="slide.description" 
                            class="form-control" 
                            rows="2" 
                            placeholder="–û–ø–∏—Å–∞–Ω–∏–µ —Å–ª–∞–π–¥–∞"></textarea>
                  <input [(ngModel)]="slide.image" 
                         class="form-control" 
                         placeholder="URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">
                </div>
                <div class="slide-actions">
                  <button (click)="moveSlideUp(i)" 
                          [disabled]="i === 0" 
                          class="btn btn-secondary" 
                          title="–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–≤–µ—Ä—Ö">
                    ‚Üë –í–≤–µ—Ä—Ö
                  </button>
                  <button (click)="moveSlideDown(i)" 
                          [disabled]="i === slides.length - 1" 
                          class="btn btn-secondary"
                          title="–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–Ω–∏–∑">
                    ‚Üì –í–Ω–∏–∑
                  </button>
                  <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ª–∞–π–¥–∞ -->
                  <button (click)="openEditSlideModal(i)" 
                          class="btn btn-changer"
                          title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ª–∞–π–¥">
                    ‚úé –ò–∑–º–µ–Ω–∏—Ç—å
                  </button>
                  <button (click)="removeSlide(i)" 
                          class="btn btn-danger"
                          title="–£–¥–∞–ª–∏—Ç—å —Å–ª–∞–π–¥">
                    ‚úï –£–¥–∞–ª–∏—Ç—å
                  </button>
                </div>
              </div>
            }
          }
        </div>
      </div>
    </div>
  }

  <!-- –í–∫–ª–∞–¥–∫–∞ "–û –∫–æ–º–ø–∞–Ω–∏–∏" -->
  @if (activeTab === 'company') {
    <div class="tab-content active" id="company">
      <div class="admin-form">
        <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ "–û –∫–æ–º–ø–∞–Ω–∏–∏"</h3>
        
        <div class="about-sections">
          @for (section of aboutSections; track section.title; let i = $index) {
            <div class="about-section-edit">
              <div class="section-content">
                <input [(ngModel)]="section.title" 
                      placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ä–∞–∑–¥–µ–ª–∞" 
                      class="form-control">
                <textarea [(ngModel)]="section.content" 
                          placeholder="–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞" 
                          class="form-control" rows="4"></textarea>
              </div>
              @if (aboutSections.length > 1) {
                <div class="section-actions">
                  <button (click)="removeAboutSection(i)" class="btn btn-danger">–£–¥–∞–ª–∏—Ç—å —Ä–∞–∑–¥–µ–ª</button>
                </div>
              }
            </div>
          }
          
          <button (click)="addAboutSection()" class="btn btn-secondary"> –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª</button>
        </div>
      </div>
    </div>
  }

  

  <!-- –ö–Ω–æ–ø–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è -->
  <div class="form-actions">
    <button (click)="saveAllSettings()" class="btn btn-success">
      üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
    </button>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ª–∞–π–¥–∞ -->
@if (isEditModalOpen && editingSlide) {
  <div class="modal-overlay" (click)="closeEditModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–∞–π–¥–∞</h3>
        <button class="modal-close" (click)="closeEditModal()">√ó</button>
      </div>
      
      <div class="modal-body">
        <div class="form-group">
          <label>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:</label>
          <div class="image-upload-section">
            <div class="image-url-input">
              <input [(ngModel)]="editingSlide.image" 
                     placeholder="URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è" 
                     class="form-control">
              <button type="button" 
                      class="btn btn-secondary"
                      (click)="changeImageForEditingSlide()">
                üìÅ –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª
              </button>
            </div>
            
            @if (editingSlide.image && isImageUrl(editingSlide.image)) {
              <div class="image-preview">
                <img [src]="editingSlide.image" 
                     alt="–ü—Ä–µ–≤—å—é" 
                     class="preview-image">
              </div>
            }
          </div>
        </div>
        
        <div class="form-group">
          <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫:</label>
          <input [(ngModel)]="editingSlide.title" 
                 class="form-control" 
                 placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–ª–∞–π–¥–∞">
        </div>
        
        <div class="form-group">
          <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
          <textarea [(ngModel)]="editingSlide.description" 
                    class="form-control" 
                    rows="3" 
                    placeholder="–û–ø–∏—Å–∞–Ω–∏–µ —Å–ª–∞–π–¥–∞"></textarea>
        </div>
      </div>
      
      <div class="modal-footer">
        <button (click)="closeEditModal()" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</button>
        <button (click)="saveEditedSlide()" class="btn btn-success">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>
}